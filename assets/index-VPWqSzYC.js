var e=Object.defineProperty,s=(s,t,a)=>(((s,t,a)=>{t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a})(s,"symbol"!=typeof t?t+"":t,a),a);import{r as t,j as a,C as r}from"./threeFiber-wgP-k_4X.js";import{S as o}from"./useMenuButtonDelay-gNaFhlQp.js";import{h as l,X as n,g as c,b as i}from"./three-71H3Suoo.js";import{u}from"./index-eJudY11J.js";import{g as d}from"./gsap-b4RP9EQ6.js";import{u as h}from"./useLabsLoader-0YiGFm3k.js";import{T as m}from"./Textures-D8KxavPh.js";import{a as p,u as g,E as k,d as w,f as j}from"./threeDrei-TbYxsnpq.js";import"./threeStdLib-Ui_sxDIS.js";class x{}s(x,"METALS",["#333","#6F6E6A","#34495E","#DEB887","#eee","#E84118","#068BD3","#A6E22E","#F1C40F","#8E44AD","#BA3763","#F1396E"]),s(x,"DECKS",["/assets/OniMask-7WTs7MJq.png","/assets/PinkSwirl-PEBQ9Bhz.png","/assets/red-and-black-3eqJr6MO.png","/assets/against-the-tide-i4_urUwp.png","/assets/thank-you-deck-A_2Zc2jS.png","/assets/yellow-and-black-RBVnQlns.png","/assets/red-and-white-2ImHtUZ5.png","/assets/black-and-yellow-pEywBLPD.png","/assets/green-and-navy-jl2qbhXc.png","/assets/gray-and-black-qlEyLFo1.png","/assets/grid-streaks-HtRiMl3E.png"]),s(x,"WHEELS",["/assets/wheel-black-aUDxje9X.png","/assets/wheel-blue-6s_4nj1X.png","/assets/wheel-cream-V1bDduC2.png","/assets/wheel-green-cIFku8PE.png","/assets/wheel-navy-F1gJPLkU.png","/assets/wheel-pink-35KoXwCV.png","/assets/wheel-purple-VAbJedA0.png","/assets/wheel-red-Mz_DSfC8.png","/assets/wheel-yellow-INPpXFuU.png"]);const S=[0,.3,0],f=[2.5,.75,0],y=t.createContext({wheel:x.WHEELS[0],updateWheels:()=>{},deck:x.DECKS[0],updateDeck:()=>{},truck:x.METALS[0],updateTrucks:()=>{},bolt:x.METALS[0],updateBolts:()=>{},lookAtDeck:()=>{},camera:t.createRef()}),b=({children:e})=>{const[s,r]=t.useState(x.WHEELS[0]),[o,n]=t.useState(x.METALS[0]),[c,i]=t.useState(x.DECKS[0]),[u,d]=t.useState(x.METALS[0]),{camera:h,lookAtBolts:m,lookAtTruck:p,lookAtWheel:g,lookAtDeck:k}=(()=>{const e=t.useRef(null),s=t.useCallback(((s,t)=>{e.current&&(e.current.setTarget(s.x,s.y,s.z,!0),e.current.setPosition(t.x,t.y,t.z,!0))}),[e]),a=t.useCallback((()=>{s(new l(0,.29,.5),new l(.4,.3,1))}),[s]),r=t.useCallback((()=>{s(new l(.2,.54,.65),new l(.4,1,.6))}),[s]),o=t.useCallback((()=>{s(new l(.15,.3,.62),new l(-.75,.35,.8))}),[s]),n=t.useCallback((()=>{s(new l(...S),new l(...f))}),[s]);return t.useMemo((()=>({camera:e,lookAtBolts:o,lookAtDeck:n,lookAtTruck:a,lookAtWheel:r})),[o,n,a,r])})(),w=t.useCallback(((e,s)=>t=>{e(t),s()}),[]),j=t.useMemo((()=>w(r,g)),[w,g]),b=t.useMemo((()=>w(d,p)),[w,p]),M=t.useMemo((()=>w(i,k)),[w,k]),v=t.useMemo((()=>w(n,m)),[w,m]),E=t.useMemo((()=>({camera:h,wheel:s,bolt:o,deck:c,truck:u,lookAtDeck:k,updateWheels:j,updateTrucks:b,updateDeck:M,updateBolts:v})),[s,o,c,u,h,k,j,b,M,v]);return a.jsx(y.Provider,{value:E,children:e})},M=()=>t.useContext(y),v=({selected:e,children:s,onClick:r,colorField:o,imageField:l,imageStyles:n})=>{const c=u("option",{selected:e}),i=t.useCallback((()=>{var e;r(null!=(e=null!=o?o:l)?e:"")}),[r,o,l]);return a.jsx("li",{children:a.jsxs("button",{className:c,onClick:i,children:[l?a.jsx("img",{src:l,alt:"",style:n}):a.jsx("div",{style:{backgroundColor:null!=o?o:void 0}}),a.jsx("span",{children:s})]})})},E=({title:e,selectedName:s,children:r})=>{const o=t.useMemo((()=>s?function(e){const s=e.split("/"),t=s[s.length-1],[a]=t.split(".");return a.replace(/-/g," ")}(s):""),[s]);return a.jsxs("div",{className:"options",children:[a.jsxs("div",{children:[a.jsx("h2",{children:e}),a.jsxs("p",{children:[a.jsx("span",{children:"| "}),o]})]}),a.jsx("ul",{children:r})]})};const C=e=>{const{deck:s,bolt:t,wheel:r,truck:o,updateBolts:l,updateDeck:n,updateTrucks:c,updateWheels:i}=M();return a.jsxs("div",{className:"controls",children:[a.jsx(E,{title:"Deck",selectedName:s,children:x.DECKS.map((e=>a.jsx(v,{imageField:e,onClick:n,imageStyles:{width:"500%",height:"500%",translate:"20% -0%",objectFit:"cover"},selected:e===s,children:e.replace(/-/g," ")},e)))}),a.jsx(E,{title:"Wheels",selectedName:r,children:x.WHEELS.map((e=>a.jsx(v,{imageField:e,onClick:i,imageStyles:{width:"125%",height:"125%",translate:"6% 8%",objectFit:"cover"},selected:e===r,children:e.replace(/-/g," ")},e)))}),a.jsx(E,{title:"Trucks",selectedName:o,children:x.METALS.map((e=>a.jsx(v,{colorField:e,onClick:c,selected:e===o,children:e.replace(/-/g," ")},e)))}),a.jsx(E,{title:"Bolts",selectedName:t,children:x.METALS.map((e=>a.jsx(v,{colorField:e,onClick:l,selected:e===t,children:e.replace(/-/g," ")},e)))})]})},A="/assets/warehouse-512-2HjUVqN4.hdr",D="#3b3a3a",T=e=>{const s=p("/assets/concrete-normal-cZDGbQ2H.avif",(e=>{m.wrap(e).repeat(e,30).rerender(e),e.anisotropy=8})),r=t.useMemo((()=>new n({roughness:.75,color:D,normalMap:s})),[s]);return a.jsx("mesh",{castShadow:!0,receiveShadow:!0,position:[0,-.005,0],rotation:[-Math.PI/2,0,0],material:r,children:a.jsx("circleGeometry",{args:[20,32]})})},P="/assets/Skateboard-I1tSJVsz.glb",B=t.forwardRef((function({wheelTexture:e,deckTexture:s,boltColor:r,truckColor:o,pos:l="upright"},i){const{nodes:u}=g(P),d=t.useRef([]),h=(()=>{const e=p("/assets/griptape-diffuse-PcFuFE1u.webp"),s=p("/assets/griptape-roughness-9ocPRl8P.webp");return t.useMemo((()=>{const t=new n({map:e,bumpMap:s,roughnessMap:s,bumpScale:3.5,roughness:.8,color:"#555"});return e&&m.wrap(e).repeat(e,9).rerender(e),s&&(m.wrap(s).repeat(s,9).rerender(s),s.anisotropy=8),t}),[e,s])})(),k=((e="#555")=>t.useMemo((()=>new n({color:e,metalness:.5,roughness:.3})),[e]))(r),w=((e="#555")=>{const s=p("/assets/metal-normal-61eyqixG.avif",(e=>{m.wrap(e).repeat(e,8).rerender(e),e.anisotropy=8}));return t.useMemo((()=>new n({color:e,metalness:.8,roughness:.25,normalMap:s,normalScale:new c(.3,.3)})),[e,s])})(o),j=(x=s,t.useMemo((()=>new n({roughness:.1,map:x})),[x]));var x;const S=(e=>t.useMemo((()=>new n({roughness:.35,map:e})),[e]))(e),f=t.useCallback(((e,s)=>t=>{t&&(s.current[e]=t)}),[]),y=t.useMemo((()=>Array.from({length:4},((e,s)=>f(s,d)))),[f]),b=t.useMemo((()=>({side:{rotation:[0,0,Math.PI/2],position:[.25,.295,0]},upright:{rotation:[0,0,0],position:[0,0,0]}})),[]);return t.useImperativeHandle(i,(()=>({wheels:d})),[d]),a.jsx("group",{dispose:null,rotation:b[l].rotation,position:b[l].position,children:a.jsxs("group",{name:"Scene",children:[a.jsx("mesh",{name:"GripTape",castShadow:!0,receiveShadow:!0,material:h,geometry:u.GripTape.geometry,position:[0,.286,-.002]}),a.jsx("mesh",{name:"Wheel1",castShadow:!0,receiveShadow:!0,ref:y[0],geometry:u.Wheel1.geometry,material:S,position:[.238,.086,.635]}),a.jsx("mesh",{name:"Wheel2",castShadow:!0,receiveShadow:!0,ref:y[1],geometry:u.Wheel2.geometry,material:S,position:[-.237,.086,.635]}),a.jsx("mesh",{name:"Deck",castShadow:!0,receiveShadow:!0,geometry:u.Deck.geometry,material:j,position:[0,.271,-.002]}),a.jsx("mesh",{name:"Wheel4",castShadow:!0,receiveShadow:!0,ref:y[3],geometry:u.Wheel4.geometry,material:S,position:[-.238,.086,-.635],rotation:[Math.PI,0,Math.PI]}),a.jsx("mesh",{name:"Bolts",castShadow:!0,receiveShadow:!0,geometry:u.Bolts.geometry,material:k,position:[0,.198,0],rotation:[Math.PI,0,Math.PI]}),a.jsx("mesh",{name:"Wheel3",castShadow:!0,receiveShadow:!0,ref:y[2],geometry:u.Wheel3.geometry,material:S,position:[.237,.086,-.635],rotation:[Math.PI,0,Math.PI]}),a.jsx("mesh",{name:"Baseplates",castShadow:!0,receiveShadow:!0,geometry:u.Baseplates.geometry,material:w,position:[0,.211,0]}),a.jsx("mesh",{name:"Truck1",castShadow:!0,receiveShadow:!0,geometry:u.Truck1.geometry,material:w,position:[0,.101,-.617]}),a.jsx("mesh",{name:"Truck2",castShadow:!0,receiveShadow:!0,geometry:u.Truck2.geometry,material:w,position:[0,.101,.617],rotation:[Math.PI,0,Math.PI]})]})})}));g.preload(P);const F=(e,s)=>{const a=(e=>{const s=p(e,(e=>{(Array.isArray(e)?s:[s]).forEach((e=>{e.flipY=!1,e.colorSpace=i,e.needsUpdate=!0}))}));return s})(e),r=t.useMemo((()=>{const s={},{length:t}=e;for(let a=0;a<t;a++)s[e[a]]=a;return s}),[e]),o=t.useMemo((()=>{var e;return null!=(e=r[null!=s?s:"-1"])?e:0}),[r,s]);return t.useMemo((()=>a[o]),[a,o])},W="#6f6e6a";function L(e){h();const s=t.useRef(null),r=t.useRef(null),{camera:o,wheel:l,deck:n,bolt:c,truck:i,lookAtDeck:u}=M(),m=F(x.DECKS,n),p=F(x.WHEELS,l),g=null!=i?i:W,S=null!=c?c:W,f=t.useCallback((()=>{o.current&&s.current&&!o.current.colliderMeshes.length&&(o.current.colliderMeshes=[s.current])}),[o]);return t.useEffect((()=>{var e,s,t;if(null==(t=null==(s=null==(e=null==r?void 0:r.current)?void 0:e.wheels)?void 0:s.current)?void 0:t.length)for(const a of r.current.wheels.current)a&&d.to(a.rotation,{x:"+=30",duration:2.5,ease:"circ.out"})}),[l]),t.useEffect((()=>{o.current&&u()}),[u,o]),a.jsxs(t.Fragment,{children:[a.jsxs(t.Suspense,{fallback:null,children:[a.jsx(k,{files:A,environmentIntensity:.6}),a.jsx("directionalLight",{castShadow:!0,lookAt:[0,0,0],position:[1,1,1],intensity:1.6}),a.jsx("fog",{attach:"fog",args:[D,3,10]}),a.jsx("color",{attach:"background",args:[D]}),a.jsx(T,{}),a.jsxs("mesh",{rotation:[-Math.PI/2,0,0],ref:s,children:[a.jsx("planeGeometry",{args:[6,6]}),a.jsx("meshBasicMaterial",{visible:!1})]}),a.jsx(B,{pos:"side",ref:r,boltColor:S,truckColor:g,deckTexture:m,wheelTexture:p}),a.jsx(w,{makeDefault:!0,ref:o,maxDistance:4,minDistance:.2,onStart:f})]}),a.jsx(j,{all:!0})]})}function I(e){return a.jsx("div",{className:"skateboard-scene",children:a.jsxs(b,{children:[a.jsx("div",{className:"preview",children:a.jsx("div",{className:"canvas-container",children:a.jsx(r,{shadows:!0,camera:{fov:50,position:f},children:a.jsx(L,{})})})}),a.jsxs("div",{className:"options-menu",children:[a.jsx(o,{text:"Build Your Board"}),a.jsx(C,{})]})]})})}export{I as default};
//# sourceMappingURL=index-VPWqSzYC.js.map

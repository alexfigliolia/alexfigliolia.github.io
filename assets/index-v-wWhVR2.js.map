{"version":3,"file":"index-v-wWhVR2.js","sources":["../../src/Components/Button3D/Controller.ts","../../src/Components/Button3D/index.tsx","../../node_modules/@figliolia/ripples/dist/mjs/Animation.js","../../node_modules/@figliolia/ripples/dist/mjs/ImageLoader.js","../../node_modules/@figliolia/ripples/dist/mjs/Options.js","../../node_modules/@figliolia/ripples/dist/mjs/Shaders.js","../../node_modules/@figliolia/ripples/dist/mjs/StyleCache.js","../../node_modules/@figliolia/ripples/dist/mjs/Textures.js","../../node_modules/@figliolia/ripples/dist/mjs/BrowserSupport.js","../../node_modules/@figliolia/ripples/dist/mjs/WebGL.js","../../node_modules/@figliolia/ripples/dist/mjs/Ripples.js","../../src/Components/Page/index.tsx"],"sourcesContent":["import type { MouseEvent, TouchEvent } from \"react\";\nimport type { Coordinate, ISetAnimationFrame } from \"./types\";\n\nexport class Controller {\n  private top = 0;\n  private left = 0;\n  private width = 0;\n  private height = 0;\n  private setAnimationFrame: ISetAnimationFrame;\n  constructor(setAnimationFrame: ISetAnimationFrame) {\n    this.setAnimationFrame = setAnimationFrame;\n  }\n\n  private cacheTargetData(eventTarget: EventTarget) {\n    const target = eventTarget as HTMLButtonElement;\n    const { top, left, height, width } = target.getBoundingClientRect();\n    this.top = top;\n    this.height = height;\n    const offset = width * 0.2;\n    this.left = left - offset / 2;\n    this.width = width + width * 0.2;\n  }\n\n  private getRotations(x: number, y: number): [x: number, y: number] {\n    const mouseY = y - this.top;\n    const mouseX = x - this.left;\n    const offsetX = 0.5 - mouseX / this.width;\n    const offsetY = 0.5 - mouseY / this.height;\n    return [offsetY * 50, offsetX * 20];\n  }\n\n  private setFrame([x, y]: Coordinate, duration: number) {\n    this.setAnimationFrame({\n      rotX: x,\n      rotY: y,\n      transition: `${duration}s`,\n      scale: 1.1,\n      boxShadow: `0 ${x}px ${\n        this.height / 5\n      }px rgba(0,0,0,0.5), ${x}px ${y}px ${this.width / 5}px rgba(0,0,0,0.45)`,\n    });\n  }\n\n  private mouseEnter = (\n    e: MouseEvent<HTMLButtonElement> | TouchEvent<HTMLButtonElement>,\n  ) => {\n    this.cacheTargetData(e.currentTarget);\n    this.setFrame(this.getRotations(...this.getCoordinates(e)), 0.5);\n  };\n\n  private mouseMove = (\n    e: MouseEvent<HTMLButtonElement> | TouchEvent<HTMLButtonElement>,\n  ) => {\n    this.setFrame(this.getRotations(...this.getCoordinates(e)), 0);\n  };\n\n  private mouseLeave = () => {\n    this.setAnimationFrame({\n      rotX: 0,\n      rotY: 0,\n      scale: 1,\n      transition: \"0.5s\",\n      boxShadow: \"none\",\n    });\n  };\n\n  private getCoordinates(\n    e: MouseEvent<HTMLButtonElement> | TouchEvent<HTMLButtonElement>,\n  ): [clientX: number, clientY: number] {\n    if (\"touches\" in e) {\n      return [e.touches[0].clientX, e.touches[0].clientY];\n    }\n    return [e.clientX, e.clientY];\n  }\n\n  public readonly events = {\n    onMouseMove: this.mouseMove,\n    onTouchEnd: this.mouseLeave,\n    onTouchMove: this.mouseMove,\n    onTouchStart: this.mouseEnter,\n    onMouseEnter: this.mouseEnter,\n    onMouseLeave: this.mouseLeave,\n  };\n}\n","import { memo, useState } from \"react\";\nimport { useController } from \"Hooks/useController\";\nimport { Controller } from \"./Controller\";\nimport type { IAnimationFrame, Props } from \"./types\";\nimport \"./styles.scss\";\n\nexport const Button3D = memo(function Button3D({ text, onClick }: Props) {\n  const [frame, setFrame] = useState<IAnimationFrame>({\n    rotX: 0,\n    rotY: 0,\n    scale: 1,\n    transition: 0.5,\n    boxShadow: \"none\",\n  });\n  const controller = useController(new Controller(setFrame));\n  return (\n    <button\n      onClick={onClick}\n      {...controller.events}\n      className=\"outline-button\"\n      style={{\n        transform: `rotateX(${frame.rotX}deg) rotateY(${frame.rotY}deg) skew(-10deg) scale(${frame.scale})`,\n        transitionDuration: `${frame.transition}`,\n        boxShadow: frame.boxShadow,\n      }}>\n      <div>{text}</div>\n    </button>\n  );\n});\n\nexport * from \"./types\";\n","import { Subscriptable } from \"@figliolia/event-emitter\";\nexport class Animations {\n    static frame = null;\n    static callstack = new Subscriptable();\n    static register(callback) {\n        const ID = this.callstack.register(callback);\n        void Promise.resolve().then(() => {\n            this.nextFrame();\n        });\n        return ID;\n    }\n    static delete(ID) {\n        return this.callstack.remove(ID);\n    }\n    static nextFrame() {\n        if (this.frame) {\n            return;\n        }\n        this.animate();\n    }\n    static animate() {\n        this.frame = requestAnimationFrame(() => {\n            if (!this.callstack.length) {\n                return this.closeLoop();\n            }\n            this.callstack.execute();\n            this.animate();\n        });\n    }\n    static closeLoop() {\n        if (this.frame) {\n            cancelAnimationFrame(this.frame);\n            this.frame = null;\n        }\n    }\n}\n","export class ImageLoader {\n    Textures;\n    GL;\n    constructor(Textures) {\n        this.Textures = Textures;\n        this.GL = this.Textures.GL;\n    }\n    load(src, crossOrigin) {\n        const image = new Image();\n        return new Promise((resolve, reject) => {\n            image.onload = () => {\n                this.textureIze(image);\n                resolve(image);\n            };\n            image.onerror = () => {\n                this.Textures.setTransparent();\n                reject();\n            };\n            image.crossOrigin = this.isDataUri(src) ? null : crossOrigin;\n            image.src = src;\n        });\n    }\n    textureIze(image) {\n        const wrapping = this.isPowerOfTwo(image.width) && this.isPowerOfTwo(image.height)\n            ? this.GL.REPEAT\n            : this.GL.CLAMP_TO_EDGE;\n        this.GL.bindTexture(this.GL.TEXTURE_2D, this.Textures.backgroundTexture);\n        this.GL.texParameteri(this.GL.TEXTURE_2D, this.GL.TEXTURE_WRAP_S, wrapping);\n        this.GL.texParameteri(this.GL.TEXTURE_2D, this.GL.TEXTURE_WRAP_T, wrapping);\n        this.GL.texImage2D(this.GL.TEXTURE_2D, 0, this.GL.RGBA, this.GL.RGBA, this.GL.UNSIGNED_BYTE, image);\n    }\n    isDataUri(url) {\n        return url.match(/^data:/);\n    }\n    isPowerOfTwo(x) {\n        return (x & (x - 1)) == 0;\n    }\n}\n","export class Options {\n    resolution;\n    dropRadius;\n    perturbance;\n    crossOrigin;\n    interactive;\n    imageUrl;\n    onInitialized;\n    constructor(options) {\n        const configuration = this.configure(options);\n        this.imageUrl = configuration.imageUrl;\n        this.dropRadius = configuration.dropRadius;\n        this.interactive = configuration.interactive;\n        this.perturbance = configuration.perturbance;\n        this.crossOrigin = configuration.crossOrigin;\n        this.onInitialized = configuration.onInitialized;\n        this.resolution = this.extractResolution(configuration.resolution);\n    }\n    static defaults = {\n        imageUrl: null,\n        resolution: 512,\n        dropRadius: 10,\n        perturbance: 0.02,\n        interactive: true,\n        crossOrigin: \"\",\n    };\n    configure(options) {\n        return Object.assign({}, Options.defaults, options);\n    }\n    extractResolution(resolution) {\n        if (typeof resolution === \"number\") {\n            return resolution;\n        }\n        if (typeof window.devicePixelRatio === \"number\") {\n            return Math.max(Options.defaults.resolution, 256 * window.devicePixelRatio);\n        }\n        return Options.defaults.resolution;\n    }\n    extractUrl(value) {\n        const urlMatch = /url\\([\"']?([^\"']*)[\"']?\\)/.exec(value);\n        if (urlMatch == null) {\n            return null;\n        }\n        return urlMatch[1];\n    }\n    isDataUri(url) {\n        return url.match(/^data:/);\n    }\n}\n","export class Shaders {\n    dropProgram;\n    updateProgram;\n    renderProgram;\n    GL;\n    textureDelta;\n    constructor(GL, resolution) {\n        this.GL = GL;\n        this.textureDelta = new Float32Array([1 / resolution, 1 / resolution]);\n        this.dropProgram = this.compileDrop();\n        this.updateProgram = this.compileUpdate();\n        this.GL.uniform2fv(this.updateProgram.locations.delta, this.textureDelta);\n        this.renderProgram = this.compileRender();\n        this.GL.uniform2fv(this.renderProgram.locations.delta, this.textureDelta);\n    }\n    drop(position, radius, strength) {\n        if (this.dropProgram) {\n            this.GL.useProgram(this.dropProgram.id);\n            this.GL.uniform2fv(this.dropProgram.locations.center, position);\n            this.GL.uniform1f(this.dropProgram.locations.radius, radius);\n            this.GL.uniform1f(this.dropProgram.locations.strength, strength);\n        }\n    }\n    render(perturbance) {\n        this.GL.uniform1f(this.renderProgram.locations.perturbance, perturbance);\n        this.GL.uniform2fv(this.renderProgram.locations.topLeft, \n        // @ts-ignore\n        this.renderProgram.uniforms.topLeft);\n        this.GL.uniform2fv(this.renderProgram.locations.bottomRight, \n        // @ts-ignore\n        this.renderProgram.uniforms.bottomRight);\n        this.GL.uniform2fv(this.renderProgram.locations.containerRatio, \n        // @ts-ignore\n        this.renderProgram.uniforms.containerRatio);\n        this.GL.uniform1i(this.renderProgram.locations.samplerBackground, 0);\n        this.GL.uniform1i(this.renderProgram.locations.samplerRipples, 1);\n    }\n    compileDrop() {\n        return this.createProgram(Shaders.VERTEX_SHADER, Shaders.DROP_PROGRAM);\n    }\n    compileUpdate() {\n        return this.createProgram(Shaders.VERTEX_SHADER, Shaders.UPDATE_PROGRAM);\n    }\n    compileRender() {\n        return this.createProgram(Shaders.RENDER_BACKGROUND_PROGRAM, Shaders.RENDER_RIPPLE_PROGRAM);\n    }\n    createProgram(vertexSource, fragmentSource) {\n        if (!this.GL) {\n            throw new Error(\"Cannot initialize shaders without a rendering context\");\n        }\n        const program = { id: this.GL.createProgram() };\n        this.GL.attachShader(program.id, this.compileSource(this.GL.VERTEX_SHADER, vertexSource));\n        this.GL.attachShader(program.id, this.compileSource(this.GL.FRAGMENT_SHADER, fragmentSource));\n        this.GL.linkProgram(program.id);\n        if (!this.GL.getProgramParameter(program.id, this.GL.LINK_STATUS)) {\n            throw new Error(\"link error: \" + this.GL.getProgramInfoLog(program.id));\n        }\n        program.uniforms = {};\n        program.locations = {};\n        this.GL.useProgram(program.id);\n        this.GL.enableVertexAttribArray(0);\n        let match, name;\n        const regex = /uniform (\\w+) (\\w+)/g;\n        const shaderCode = vertexSource + fragmentSource;\n        while ((match = regex.exec(shaderCode)) != null) {\n            name = match[2];\n            program.locations[name] = this.GL.getUniformLocation(program.id, name);\n        }\n        return program;\n    }\n    compileSource(type, source) {\n        if (!this.GL) {\n            throw new Error(\"Cannot initialize shaders without a rendering context\");\n        }\n        const shader = this.GL.createShader(type);\n        this.GL.shaderSource(shader, source);\n        this.GL.compileShader(shader);\n        if (!this.GL.getShaderParameter(shader, this.GL.COMPILE_STATUS)) {\n            throw new Error(\"compile error: \" + this.GL.getShaderInfoLog(shader));\n        }\n        return shader;\n    }\n    static VERTEX_SHADER = [\n        \"attribute vec2 vertex;\",\n        \"varying vec2 coord;\",\n        \"void main() {\",\n        \"coord = vertex * 0.5 + 0.5;\",\n        \"gl_Position = vec4(vertex, 0.0, 1.0);\",\n        \"}\",\n    ].join(\"\\n\");\n    static DROP_PROGRAM = [\n        \"precision highp float;\",\n        \"const float PI = 3.141592653589793;\",\n        \"uniform sampler2D texture;\",\n        \"uniform vec2 center;\",\n        \"uniform float radius;\",\n        \"uniform float strength;\",\n        \"varying vec2 coord;\",\n        \"void main() {\",\n        \"vec4 info = texture2D(texture, coord);\",\n        \"float drop = max(0.0, 1.0 - length(center * 0.5 + 0.5 - coord) / radius);\",\n        \"drop = 0.5 - cos(drop * PI) * 0.5;\",\n        \"info.r += drop * strength;\",\n        \"gl_FragColor = info;\",\n        \"}\",\n    ].join(\"\\n\");\n    static UPDATE_PROGRAM = [\n        \"precision highp float;\",\n        \"uniform sampler2D texture;\",\n        \"uniform vec2 delta;\",\n        \"varying vec2 coord;\",\n        \"void main() {\",\n        \"vec4 info = texture2D(texture, coord);\",\n        \"vec2 dx = vec2(delta.x, 0.0);\",\n        \"vec2 dy = vec2(0.0, delta.y);\",\n        \"float average = (\",\n        \"texture2D(texture, coord - dx).r +\",\n        \"texture2D(texture, coord - dy).r +\",\n        \"texture2D(texture, coord + dx).r +\",\n        \"texture2D(texture, coord + dy).r\",\n        \") * 0.25;\",\n        \"info.g += (average - info.r) * 2.0;\",\n        \"info.g *= 0.995;\",\n        \"info.r += info.g;\",\n        \"gl_FragColor = info;\",\n        \"}\",\n    ].join(\"\\n\");\n    static RENDER_BACKGROUND_PROGRAM = [\n        \"precision highp float;\",\n        \"attribute vec2 vertex;\",\n        \"uniform vec2 topLeft;\",\n        \"uniform vec2 bottomRight;\",\n        \"uniform vec2 containerRatio;\",\n        \"varying vec2 ripplesCoord;\",\n        \"varying vec2 backgroundCoord;\",\n        \"void main() {\",\n        \"backgroundCoord = mix(topLeft, bottomRight, vertex * 0.5 + 0.5);\",\n        \"backgroundCoord.y = 1.0 - backgroundCoord.y;\",\n        \"ripplesCoord = vec2(vertex.x, -vertex.y) * containerRatio * 0.5 + 0.5;\",\n        \"gl_Position = vec4(vertex.x, -vertex.y, 0.0, 1.0);\",\n        \"}\",\n    ].join(\"\\n\");\n    static RENDER_RIPPLE_PROGRAM = [\n        \"precision highp float;\",\n        \"uniform sampler2D samplerBackground;\",\n        \"uniform sampler2D samplerRipples;\",\n        \"uniform vec2 delta;\",\n        \"uniform float perturbance;\",\n        \"varying vec2 ripplesCoord;\",\n        \"varying vec2 backgroundCoord;\",\n        \"void main() {\",\n        \"float height = texture2D(samplerRipples, ripplesCoord).r;\",\n        \"float heightX = texture2D(samplerRipples, vec2(ripplesCoord.x + delta.x, ripplesCoord.y)).r;\",\n        \"float heightY = texture2D(samplerRipples, vec2(ripplesCoord.x, ripplesCoord.y + delta.y)).r;\",\n        \"vec3 dx = vec3(delta.x, heightX - height, 0.0);\",\n        \"vec3 dy = vec3(0.0, heightY - height, delta.y);\",\n        \"vec2 offset = -normalize(cross(dy, dx)).xz;\",\n        \"float specular = pow(max(0.0, dot(offset, normalize(vec2(-0.6, 1.0)))), 4.0);\",\n        \"gl_FragColor = texture2D(samplerBackground, backgroundCoord + offset * perturbance) + specular;\",\n        \"}\",\n    ].join(\"\\n\");\n}\n","export class StyleCache extends Map {\n    constructor() {\n        super([\n            [\"zIndex\", \"\"],\n            [\"position\", \"\"],\n            [\"backgroundWidth\", 0],\n            [\"backgroundHeight\", 0],\n            [\"originalInlineCSS\", \"\"],\n            [\"originalCSSBackgroundImage\", \"\"],\n        ]);\n    }\n    initialize(target) {\n        const { position, zIndex, backgroundImage } = window.getComputedStyle(target);\n        this.set(\"zIndex\", zIndex);\n        this.set(\"position\", position);\n        this.set(\"originalCSSBackgroundImage\", backgroundImage);\n        this.set(\"originalInlineCSS\", target.style.backgroundImage);\n    }\n    get(key) {\n        return super.get(key);\n    }\n    evict(key) {\n        return super.set(key, \"\");\n    }\n}\n","import { BrowserSupport } from \"./BrowserSupport.js\";\nexport class Textures {\n    quad;\n    bufferReadIndex = 1;\n    bufferWriteIndex = 0;\n    GL;\n    textures = [];\n    backgroundTexture;\n    frameBuffers = [];\n    static browserSupport = new BrowserSupport();\n    transparentPixels = this.createImageData(32, 32);\n    constructor(context) {\n        this.GL = context;\n        this.quad = this.GL.createBuffer();\n        this.backgroundTexture = this.createBackground();\n    }\n    drawQuad() {\n        this.GL.bindBuffer(this.GL.ARRAY_BUFFER, this.quad);\n        this.GL.vertexAttribPointer(0, 2, this.GL.FLOAT, false, 0, 0);\n        this.GL.drawArrays(this.GL.TRIANGLE_FAN, 0, 4);\n    }\n    get firstTexture() {\n        return this.textures[0];\n    }\n    get readTexture() {\n        return this.textures[this.bufferReadIndex];\n    }\n    get writeTexture() {\n        return this.textures[this.bufferWriteIndex];\n    }\n    get readFrame() {\n        return this.frameBuffers[this.bufferReadIndex];\n    }\n    get writeFrame() {\n        return this.frameBuffers[this.bufferWriteIndex];\n    }\n    getBrowserExtensions() {\n        Textures.browserSupport.extensions.forEach(name => {\n            this.GL.getExtension(name);\n        });\n    }\n    initialize(resolution) {\n        this.GL.bindBuffer(this.GL.ARRAY_BUFFER, this.quad);\n        const { linearSupport, type, arrayType } = Textures.browserSupport;\n        const textureData = arrayType\n            ? new arrayType(resolution * resolution * 4)\n            : null;\n        for (let i = 0; i < 2; i++) {\n            const texture = this.GL.createTexture();\n            const frameBuffer = this.GL.createFramebuffer();\n            this.GL.bindFramebuffer(this.GL.FRAMEBUFFER, frameBuffer);\n            this.GL.bindTexture(this.GL.TEXTURE_2D, texture);\n            this.GL.texParameteri(this.GL.TEXTURE_2D, this.GL.TEXTURE_MIN_FILTER, linearSupport ? this.GL.LINEAR : this.GL.NEAREST);\n            this.GL.texParameteri(this.GL.TEXTURE_2D, this.GL.TEXTURE_MAG_FILTER, linearSupport ? this.GL.LINEAR : this.GL.NEAREST);\n            this.GL.texParameteri(this.GL.TEXTURE_2D, this.GL.TEXTURE_WRAP_S, this.GL.CLAMP_TO_EDGE);\n            this.GL.texParameteri(this.GL.TEXTURE_2D, this.GL.TEXTURE_WRAP_T, this.GL.CLAMP_TO_EDGE);\n            this.GL.texImage2D(this.GL.TEXTURE_2D, 0, this.GL.RGBA, resolution, resolution, 0, this.GL.RGBA, type, textureData);\n            this.GL.framebufferTexture2D(this.GL.FRAMEBUFFER, this.GL.COLOR_ATTACHMENT0, this.GL.TEXTURE_2D, texture, 0);\n            this.textures.push(texture);\n            this.frameBuffers.push(frameBuffer);\n        }\n    }\n    setTransparent() {\n        this.GL.bindTexture(this.GL.TEXTURE_2D, this.backgroundTexture);\n        this.GL.texImage2D(this.GL.TEXTURE_2D, 0, this.GL.RGBA, this.GL.RGBA, this.GL.UNSIGNED_BYTE, this.transparentPixels);\n    }\n    swapBufferIndices() {\n        this.bufferWriteIndex = 1 - this.bufferWriteIndex;\n        this.bufferReadIndex = 1 - this.bufferReadIndex;\n    }\n    createBackground() {\n        const texture = this.GL.createTexture();\n        this.GL.bindTexture(this.GL.TEXTURE_2D, texture);\n        this.GL.pixelStorei(this.GL.UNPACK_FLIP_Y_WEBGL, 1);\n        this.GL.texParameteri(this.GL.TEXTURE_2D, this.GL.TEXTURE_MAG_FILTER, this.GL.LINEAR);\n        this.GL.texParameteri(this.GL.TEXTURE_2D, this.GL.TEXTURE_MIN_FILTER, this.GL.LINEAR);\n        return texture;\n    }\n    createImageData(width, height) {\n        try {\n            return new ImageData(width, height);\n        }\n        catch (e) {\n            // Fallback for IE\n            const canvas = document.createElement(\"canvas\");\n            return canvas.getContext(\"2d\")?.createImageData(width, height);\n        }\n    }\n}\n","export class BrowserSupport {\n    type;\n    extensions;\n    linearSupport;\n    GL;\n    arrayType;\n    constructor() {\n        this.detect();\n    }\n    detect() {\n        const extensions = this.getExtensions();\n        const texture = this.frameAndBuffer();\n        const configurations = this.getAll(extensions);\n        const { length } = configurations;\n        for (let i = 0; i < length; i++) {\n            this.GL.texImage2D(this.GL.TEXTURE_2D, 0, this.GL.RGBA, 32, 32, 0, this.GL.RGBA, configurations[i].type, null);\n            this.GL.framebufferTexture2D(this.GL.FRAMEBUFFER, this.GL.COLOR_ATTACHMENT0, this.GL.TEXTURE_2D, texture, 0);\n            if (this.GL.checkFramebufferStatus(this.GL.FRAMEBUFFER) ===\n                this.GL.FRAMEBUFFER_COMPLETE) {\n                const config = configurations[i];\n                this.type = config.type;\n                this.arrayType = config.arrayType;\n                this.extensions = config.extensions;\n                this.linearSupport = config.linearSupport;\n                return;\n            }\n        }\n        throw new Error(\"No compatible browser configurations\");\n    }\n    getAll(extensions) {\n        const configs = [];\n        configs.push(this.createConfig(\"float\", this.GL.FLOAT, Float32Array, extensions));\n        if (extensions.OES_texture_half_float) {\n            configs.push(this.createConfig(\"half_float\", extensions.OES_texture_half_float.HALF_FLOAT_OES, null, extensions));\n        }\n        return configs;\n    }\n    createConfig(type, glType, arrayType, extensions) {\n        const name = \"OES_texture_\" + type, nameLinear = name + \"_linear\", linearSupport = nameLinear in extensions, configExtensions = [name];\n        if (linearSupport) {\n            configExtensions.push(nameLinear);\n        }\n        return {\n            type: glType,\n            arrayType: arrayType,\n            linearSupport: linearSupport,\n            extensions: configExtensions,\n        };\n    }\n    frameAndBuffer() {\n        const texture = this.GL.createTexture();\n        const frameBuffer = this.GL.createFramebuffer();\n        this.GL.bindFramebuffer(this.GL.FRAMEBUFFER, frameBuffer);\n        this.GL.bindTexture(this.GL.TEXTURE_2D, texture);\n        this.GL.texParameteri(this.GL.TEXTURE_2D, this.GL.TEXTURE_MIN_FILTER, this.GL.NEAREST);\n        this.GL.texParameteri(this.GL.TEXTURE_2D, this.GL.TEXTURE_MAG_FILTER, this.GL.NEAREST);\n        this.GL.texParameteri(this.GL.TEXTURE_2D, this.GL.TEXTURE_WRAP_S, this.GL.CLAMP_TO_EDGE);\n        this.GL.texParameteri(this.GL.TEXTURE_2D, this.GL.TEXTURE_WRAP_T, this.GL.CLAMP_TO_EDGE);\n        return texture;\n    }\n    getExtensions() {\n        const canvas = document.createElement(\"canvas\");\n        this.GL = (canvas.getContext(\"webgl\") ||\n            canvas.getContext(\"experimental-webgl\"));\n        if (!this.GL) {\n            throw new Error(\"No WebGL support\");\n        }\n        const extensions = {};\n        const keys = [\n            \"OES_texture_float\",\n            \"OES_texture_half_float\",\n            \"OES_texture_float_linear\",\n            \"OES_texture_half_float_linear\",\n        ];\n        keys.forEach(name => {\n            const extension = this.GL.getExtension(name);\n            if (extension) {\n                extensions[name] = extension;\n            }\n        });\n        if (!extensions.OES_texture_float) {\n            throw new Error(\"No texture float support\");\n        }\n        return extensions;\n    }\n}\n","import { ImageLoader } from \"./ImageLoader.js\";\nimport { Options } from \"./Options.js\";\nimport { Shaders } from \"./Shaders.js\";\nimport { StyleCache } from \"./StyleCache.js\";\nimport { Textures } from \"./Textures.js\";\nexport class WebGL extends Options {\n    Shaders;\n    Textures;\n    quad;\n    target;\n    canvas;\n    GL;\n    StyleCache = new StyleCache();\n    imageSource = null;\n    constructor(target, ...rest) {\n        super(...rest);\n        this.target = target;\n        this.canvas = document.createElement(\"canvas\");\n        this.positionCanvas();\n        this.GL = this.createGL(this.canvas);\n        this.Shaders = new Shaders(this.GL, this.resolution);\n        this.Textures = new Textures(this.GL);\n    }\n    initializeWebGL() {\n        this.Textures.initialize(this.resolution);\n        this.GL.bufferData(this.GL.ARRAY_BUFFER, new Float32Array([-1, -1, +1, -1, +1, +1, -1, +1]), this.GL.STATIC_DRAW);\n        this.Textures.setTransparent();\n        void this.loadImage().then(() => {\n            this.onInitialized?.();\n        });\n        this.GL.clearColor(0, 0, 0, 0);\n        this.GL.blendFunc(this.GL.SRC_ALPHA, this.GL.ONE_MINUS_SRC_ALPHA);\n    }\n    hideCSSBackground() {\n        const inlineCSS = this.target.style.backgroundImage;\n        if (inlineCSS === \"none\") {\n            return;\n        }\n        this.StyleCache.set(\"originalInlineCSS\", inlineCSS);\n        this.StyleCache.set(\"originalCSSBackgroundImage\", window.getComputedStyle(this.target).backgroundImage);\n        this.target.style.backgroundImage = \"none\";\n    }\n    render() {\n        this.GL.bindFramebuffer(this.GL.FRAMEBUFFER, null);\n        this.GL.viewport(0, 0, this.canvas.width, this.canvas.height);\n        this.GL.enable(this.GL.BLEND);\n        this.GL.clear(this.GL.COLOR_BUFFER_BIT | this.GL.DEPTH_BUFFER_BIT);\n        this.GL.useProgram(this.Shaders.renderProgram.id);\n        this.bindTexture(this.Textures.backgroundTexture, 0);\n        this.bindTexture(this.Textures.firstTexture, 1);\n        this.Shaders.render(this.perturbance);\n        this.Textures.drawQuad();\n        this.GL.disable(this.GL.BLEND);\n    }\n    update() {\n        this.GL.viewport(0, 0, this.resolution, this.resolution);\n        this.GL.bindFramebuffer(this.GL.FRAMEBUFFER, this.Textures.writeFrame);\n        this.bindTexture(this.Textures.readTexture);\n        this.GL.useProgram(this.Shaders.updateProgram.id);\n        this.Textures.drawQuad();\n        this.Textures.swapBufferIndices();\n    }\n    isPercentage(str) {\n        return str[str.length - 1] == \"%\";\n    }\n    bindTexture(texture, unit = 0) {\n        this.GL.activeTexture(this.GL.TEXTURE0 + (unit || 0));\n        this.GL.bindTexture(this.GL.TEXTURE_2D, texture);\n    }\n    positionCanvas() {\n        this.canvas.width = this.target.offsetWidth;\n        this.canvas.height = this.target.offsetHeight;\n        this.canvas.style.position = \"absolute\";\n        this.canvas.style.top = \"0\";\n        this.canvas.style.right = \"0\";\n        this.canvas.style.bottom = \"0\";\n        this.canvas.style.left = \"0\";\n        this.canvas.style.zIndex = \"-1\";\n        this.target.appendChild(this.canvas);\n    }\n    createGL(canvas) {\n        return (canvas.getContext(\"webgl\") ||\n            canvas.getContext(\"experimental-webgl\"));\n    }\n    async loadImage() {\n        const { backgroundImage } = window.getComputedStyle(this.target);\n        const newImageSource = this.imageUrl ||\n            this.extractUrl(this.StyleCache.get(\"originalCSSBackgroundImage\")) ||\n            this.extractUrl(backgroundImage);\n        if (newImageSource == this.imageSource) {\n            return;\n        }\n        this.imageSource = newImageSource;\n        if (!this.imageSource) {\n            this.Textures.setTransparent();\n            return;\n        }\n        try {\n            const loader = new ImageLoader(this.Textures);\n            const image = await loader.load(this.imageSource, this.crossOrigin);\n            this.StyleCache.set(\"backgroundWidth\", image.width);\n            this.StyleCache.set(\"backgroundHeight\", image.height);\n            this.hideCSSBackground();\n        }\n        catch (error) {\n            // silence\n        }\n    }\n}\n","import { Animations } from \"./Animation.js\";\nimport { WebGL } from \"./WebGL.js\";\nexport class Ripples extends WebGL {\n    ID;\n    visible = false;\n    running = false;\n    destroyed = false;\n    initialized = false;\n    constructor(...options) {\n        super(...options);\n        this.cacheTargetPositions();\n        this.setupWebGL();\n    }\n    drop(x, y, radius, strength) {\n        const { offsetHeight, offsetWidth } = this.target;\n        const longestSide = Math.max(offsetHeight, offsetWidth);\n        radius = radius / longestSide;\n        const dropPosition = new Float32Array([\n            (2 * x - offsetWidth) / longestSide,\n            (offsetHeight - 2 * y) / longestSide,\n        ]);\n        this.GL.viewport(0, 0, this.resolution, this.resolution);\n        this.GL.bindFramebuffer(this.GL.FRAMEBUFFER, this.Textures.writeFrame);\n        this.bindTexture(this.Textures.readTexture);\n        this.Shaders.drop(dropPosition, radius, strength);\n        this.Textures.drawQuad();\n        this.Textures.swapBufferIndices();\n    }\n    updateSize = () => {\n        const { offsetHeight, offsetWidth } = this.target;\n        if (offsetWidth !== this.canvas.width ||\n            offsetHeight !== this.canvas.height) {\n            this.canvas.width = offsetWidth;\n            this.canvas.height = offsetHeight;\n            void this.reloadImage();\n        }\n    };\n    show() {\n        this.visible = true;\n        this.canvas.style.display = \"block\";\n        this.hideCSSBackground();\n    }\n    hide() {\n        this.visible = false;\n        this.canvas.style.display = \"none\";\n        this.restoreCSSBackground();\n    }\n    pause() {\n        this.running = false;\n    }\n    play() {\n        this.running = true;\n    }\n    destroy() {\n        this.target.style.zIndex = this.StyleCache.get(\"zIndex\");\n        this.target.style.position = this.StyleCache.get(\"position\");\n        // @ts-ignore\n        this.GL = null;\n        window.removeEventListener(\"resize\", this.updateSize);\n        this.target.removeEventListener(\"mousedown\", this.onClick);\n        this.target.removeEventListener(\"touchmove\", this.onTouch);\n        this.target.removeEventListener(\"touchstart\", this.onTouch);\n        this.target.removeEventListener(\"mousemove\", this.onMouseMove);\n        this.target.removeChild(this.canvas);\n        this.restoreCSSBackground();\n        if (this.ID) {\n            Animations.delete(this.ID);\n        }\n        this.destroyed = true;\n    }\n    reloadImage() {\n        this.restoreCSSBackground();\n        this.StyleCache.evict(\"originalCSSBackgroundImage\");\n        return this.loadImage();\n    }\n    cacheTargetPositions() {\n        this.StyleCache.initialize(this.target);\n        this.target.style.zIndex = \"0\";\n        this.target.style.position = \"relative\";\n    }\n    setupWebGL() {\n        this.Textures.getBrowserExtensions();\n        window.addEventListener(\"resize\", this.updateSize);\n        this.initializeWebGL();\n        this.visible = true;\n        this.running = true;\n        this.initialized = true;\n        this.setupPointerEvents();\n        this.ID = Animations.register(() => {\n            if (!this.destroyed) {\n                this.step();\n            }\n        });\n    }\n    setupPointerEvents() {\n        this.target.addEventListener(\"mousedown\", this.onClick);\n        this.target.addEventListener(\"mousemove\", this.onMouseMove);\n        this.target.addEventListener(\"touchmove\", this.onTouch, { passive: true });\n        this.target.addEventListener(\"touchstart\", this.onTouch, { passive: true });\n    }\n    onClick = (e) => {\n        if (!this.pointerEventsEnabled) {\n            return;\n        }\n        this.dropAtPointer(e, this.dropRadius * 1.5, 0.14);\n    };\n    onTouch = (e) => {\n        if (!this.pointerEventsEnabled) {\n            return;\n        }\n        const touches = e.changedTouches;\n        for (let i = 0; i < touches.length; i++) {\n            this.dropAtPointer(touches[i], this.dropRadius, 0.01);\n        }\n    };\n    onMouseMove = (e) => {\n        if (!this.pointerEventsEnabled) {\n            return;\n        }\n        this.dropAtPointer(e, this.dropRadius, 0.01);\n    };\n    get pointerEventsEnabled() {\n        return this.visible && this.running && this.interactive;\n    }\n    step() {\n        if (!this.visible) {\n            return;\n        }\n        this.computeTextureBoundaries();\n        if (this.running) {\n            this.update();\n        }\n        this.render();\n    }\n    computeBackgroundSize(backgroundSize, container) {\n        const BW = this.StyleCache.get(\"backgroundWidth\");\n        const BH = this.StyleCache.get(\"backgroundHeight\");\n        if (backgroundSize == \"cover\") {\n            const scale = Math.max(container.width / BW, container.height / BH);\n            return [BW * scale, BH * scale];\n        }\n        if (backgroundSize == \"contain\") {\n            const scale = Math.min(container.width / BW, container.height / BH);\n            return [BW * scale, BH * scale];\n        }\n        const BP = backgroundSize.split(\" \");\n        let backgroundWidth = BP[0] || \"\";\n        let backgroundHeight = BP[1] || backgroundWidth;\n        if (this.isPercentage(backgroundWidth)) {\n            backgroundWidth = (container.width * parseFloat(backgroundWidth)) / 100;\n        }\n        else if (backgroundWidth != \"auto\") {\n            backgroundWidth = parseFloat(backgroundWidth);\n        }\n        if (this.isPercentage(backgroundHeight)) {\n            backgroundHeight =\n                (container.height * parseFloat(backgroundHeight)) / 100;\n        }\n        else if (backgroundHeight != \"auto\") {\n            backgroundHeight = parseFloat(backgroundHeight);\n        }\n        if (backgroundWidth == \"auto\" && backgroundHeight == \"auto\") {\n            backgroundWidth = BW;\n            backgroundHeight = BH;\n        }\n        else {\n            if (backgroundWidth == \"auto\") {\n                backgroundWidth = BW * (backgroundHeight / BH);\n            }\n            if (backgroundHeight == \"auto\") {\n                backgroundHeight = BH * (backgroundWidth / BW);\n            }\n        }\n        return [backgroundWidth, backgroundHeight];\n    }\n    computeTextureBoundaries() {\n        const { backgroundSize, backgroundAttachment, backgroundPosition: BP, } = window.getComputedStyle(this.target);\n        const backgroundPosition = this.translateBackgroundPosition(BP);\n        let container;\n        if (backgroundAttachment == \"fixed\") {\n            container = {\n                left: window.scrollX,\n                top: window.scrollY,\n                width: window.innerWidth,\n                height: window.innerHeight,\n            };\n        }\n        else {\n            const { offsetTop, offsetLeft, offsetHeight, offsetWidth } = this.target;\n            container = {\n                top: offsetTop,\n                left: offsetLeft,\n                width: offsetWidth,\n                height: offsetHeight,\n            };\n        }\n        const [width, height] = this.computeBackgroundSize(backgroundSize, container);\n        let [x, y] = backgroundPosition;\n        if (this.isPercentage(x)) {\n            x = container.left + ((container.width - width) * parseFloat(x)) / 100;\n        }\n        else {\n            x = container.left + parseFloat(x);\n        }\n        if (this.isPercentage(y)) {\n            y = container.top + ((container.height - height) * parseFloat(y)) / 100;\n        }\n        else {\n            y = container.top + parseFloat(y);\n        }\n        const { offsetLeft, offsetTop, offsetHeight, offsetWidth } = this.target;\n        const floats = new Float32Array([\n            (offsetLeft - x) / width,\n            (offsetTop - y) / height,\n        ]);\n        this.Shaders.renderProgram.uniforms.topLeft = floats;\n        this.Shaders.renderProgram.uniforms.bottomRight = new Float32Array([\n            floats[0] + offsetWidth / width,\n            floats[1] + offsetHeight / height,\n        ]);\n        const maxSide = Math.max(this.canvas.width, this.canvas.height);\n        this.Shaders.renderProgram.uniforms.containerRatio = new Float32Array([\n            this.canvas.width / maxSide,\n            this.canvas.height / maxSide,\n        ]);\n    }\n    translateBackgroundPosition(value) {\n        const parts = value.split(\" \");\n        if (parts.length === 1) {\n            switch (value) {\n                case \"center\":\n                    return [\"50%\", \"50%\"];\n                case \"top\":\n                    return [\"50%\", \"0\"];\n                case \"bottom\":\n                    return [\"50%\", \"100%\"];\n                case \"left\":\n                    return [\"0\", \"50%\"];\n                case \"right\":\n                    return [\"100%\", \"50%\"];\n                default:\n                    return [value, \"50%\"];\n            }\n        }\n        return parts.map(part => {\n            switch (value) {\n                case \"center\":\n                    return \"50%\";\n                case \"top\":\n                case \"left\":\n                    return \"0\";\n                case \"right\":\n                case \"bottom\":\n                    return \"100%\";\n                default:\n                    return part;\n            }\n        });\n    }\n    restoreCSSBackground() {\n        this.target.style.backgroundImage =\n            this.StyleCache.get(\"originalInlineCSS\") || \"\";\n    }\n    dropAtPointer(pointer, radius, strength) {\n        const { borderTopWidth, borderLeftWidth } = window.getComputedStyle(this.target);\n        const borderTop = parseInt(borderTopWidth || \"0\");\n        const borderLeft = parseInt(borderLeftWidth || \"0\");\n        const { offsetTop, offsetLeft } = this.target;\n        this.drop(pointer.pageX - offsetLeft - borderLeft, pointer.pageY - offsetTop - borderTop, radius, strength);\n    }\n}\n","import type { ReactNode } from \"react\";\nimport { memo, useEffect, useRef } from \"react\";\nimport { useClassNames } from \"@figliolia/classnames\";\nimport { Ripples } from \"@figliolia/ripples\";\nimport { FullScreen } from \"Components/FullScreen\";\nimport { isPageActive, usePageController } from \"State/PageController\";\nimport \"./styles.scss\";\n\nexport const Page = memo(function Page({ name, children }: Props) {\n  const container = useRef<HTMLDivElement>(null);\n  const active = usePageController(isPageActive);\n\n  useEffect(() => {\n    if (!container.current) {\n      return;\n    }\n    const ripples = new Ripples(container.current, {\n      resolution: \"device\",\n    });\n    return () => {\n      ripples.destroy();\n    };\n  }, []);\n\n  const classes = useClassNames(\"page\", name, { active });\n\n  return (\n    <FullScreen Tag=\"main\" id=\"page\" ref={container} className={classes}>\n      <div className=\"content\">{children}</div>\n    </FullScreen>\n  );\n});\n\ninterface Props {\n  name: string;\n  children: ReactNode;\n}\n"],"names":["Controller","constructor","setAnimationFrame","__publicField","this","e","cacheTargetData","currentTarget","setFrame","getRotations","getCoordinates","rotX","rotY","scale","transition","boxShadow","onMouseMove","mouseMove","onTouchEnd","mouseLeave","onTouchMove","onTouchStart","mouseEnter","onMouseEnter","onMouseLeave","eventTarget","target","top","left","height","width","getBoundingClientRect","offset","x","y","mouseY","offsetX","duration","touches","clientX","clientY","Button3D","memo","text","onClick","frame","useState","controller","useController","jsxRuntimeExports","jsx","__spreadValues","events","className","style","transform","transitionDuration","children","Animations","register","callback","ID","callstack","Promise","resolve","then","nextFrame","remove","animate","requestAnimationFrame","length","closeLoop","execute","cancelAnimationFrame","Subscriptable","ImageLoader","Textures","GL","load","src","crossOrigin","image","Image","reject","onload","textureIze","onerror","setTransparent","isDataUri","wrapping","isPowerOfTwo","REPEAT","CLAMP_TO_EDGE","bindTexture","TEXTURE_2D","backgroundTexture","texParameteri","TEXTURE_WRAP_S","TEXTURE_WRAP_T","texImage2D","RGBA","UNSIGNED_BYTE","url","match","_Options","options","configuration","configure","imageUrl","dropRadius","interactive","perturbance","onInitialized","resolution","extractResolution","Object","assign","defaults","window","devicePixelRatio","Math","max","extractUrl","value","urlMatch","exec","Options","_Shaders","textureDelta","Float32Array","dropProgram","compileDrop","updateProgram","compileUpdate","uniform2fv","locations","delta","renderProgram","compileRender","drop","position","radius","strength","useProgram","id","center","uniform1f","render","topLeft","uniforms","bottomRight","containerRatio","uniform1i","samplerBackground","samplerRipples","createProgram","VERTEX_SHADER","DROP_PROGRAM","UPDATE_PROGRAM","RENDER_BACKGROUND_PROGRAM","RENDER_RIPPLE_PROGRAM","vertexSource","fragmentSource","Error","program","attachShader","compileSource","FRAGMENT_SHADER","linkProgram","getProgramParameter","LINK_STATUS","getProgramInfoLog","name","enableVertexAttribArray","regex","shaderCode","getUniformLocation","type","source","shader","createShader","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","join","Shaders","StyleCache","Map","super","initialize","zIndex","backgroundImage","getComputedStyle","set","get","key","evict","_Textures","context","createImageData","quad","createBuffer","createBackground","drawQuad","bindBuffer","ARRAY_BUFFER","vertexAttribPointer","FLOAT","drawArrays","TRIANGLE_FAN","firstTexture","textures","readTexture","bufferReadIndex","writeTexture","bufferWriteIndex","readFrame","frameBuffers","writeFrame","getBrowserExtensions","browserSupport","extensions","forEach","getExtension","linearSupport","arrayType","textureData","i","texture","createTexture","frameBuffer","createFramebuffer","bindFramebuffer","FRAMEBUFFER","TEXTURE_MIN_FILTER","LINEAR","NEAREST","TEXTURE_MAG_FILTER","framebufferTexture2D","COLOR_ATTACHMENT0","push","transparentPixels","swapBufferIndices","pixelStorei","UNPACK_FLIP_Y_WEBGL","ImageData","_a","document","createElement","getContext","detect","getExtensions","frameAndBuffer","configurations","getAll","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","config","configs","createConfig","OES_texture_half_float","HALF_FLOAT_OES","glType","nameLinear","configExtensions","canvas","extension","OES_texture_float","WebGL","rest","positionCanvas","createGL","initializeWebGL","bufferData","STATIC_DRAW","loadImage","call","clearColor","blendFunc","SRC_ALPHA","ONE_MINUS_SRC_ALPHA","hideCSSBackground","inlineCSS","viewport","enable","BLEND","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","disable","update","isPercentage","str","unit","activeTexture","TEXTURE0","offsetWidth","offsetHeight","right","bottom","appendChild","newImageSource","imageSource","loader","error","Ripples","reloadImage","pointerEventsEnabled","dropAtPointer","changedTouches","cacheTargetPositions","setupWebGL","longestSide","dropPosition","show","visible","display","hide","restoreCSSBackground","pause","running","play","destroy","removeEventListener","updateSize","onTouch","removeChild","delete","destroyed","addEventListener","initialized","setupPointerEvents","step","passive","computeTextureBoundaries","computeBackgroundSize","backgroundSize","container","BW","BH","min","BP","split","backgroundWidth","backgroundHeight","parseFloat","backgroundAttachment","backgroundPosition","translateBackgroundPosition","scrollX","scrollY","innerWidth","innerHeight","offsetTop","offsetLeft","floats","maxSide","parts","map","part","pointer","borderTopWidth","borderLeftWidth","borderTop","parseInt","borderLeft","pageX","pageY","Page","useRef","active","usePageController","isPageActive","useEffect","current","ripples","classes","useClassNames","FullScreen","Tag","ref"],"mappings":"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","x_google_ignoreList":[2,3,4,5,6,7,8,9,10]}
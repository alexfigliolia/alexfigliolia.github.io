var e=Object.defineProperty,t=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,r=(t,s,a)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a,o=(e,o)=>{for(var l in o||(o={}))s.call(o,l)&&r(e,l,o[l]);if(t)for(var l of t(o))a.call(o,l)&&r(e,l,o[l]);return e},l=(e,t,s)=>(r(e,"symbol"!=typeof t?t+"":t,s),s);import{r as i,j as n,C as c}from"./threeFiber-C7PdTxs4.js";import{S as h}from"./useMenuButtonDelay-MaTe2t1y.js";import{h as d,X as m,g as u,b as p}from"./three-_vvEHZTK.js";import{u as w}from"./index-KSgm0BFR.js";import{g}from"./gsap-b4RP9EQ6.js";import{u as j}from"./useLabsLoader-W5DL6KdI.js";import{T as k,K as x}from"./Textures-iK-qAZTJ.js";import{a as S,u as b,E as y,d as f,f as M}from"./threeDrei-jPcrdQkF.js";import"./threeStdLib-Js3c5gj8.js";class v{static get bitmapTextures(){return[...this.DECKS,...this.WHEELS]}}l(v,"METALS",["#333","#6F6E6A","#34495E","#DEB887","#eee","#E84118","#068BD3","#A6E22E","#F1C40F","#8E44AD","#BA3763","#F1396E"]),l(v,"DECKS",["/assets/OniMask-IAPBTNrs.webp","/assets/PinkSwirl-P5butbQC.webp","/assets/red-and-black-IPiK0CU1.webp","/assets/against-the-tide-78sYwsoh.webp","/assets/thank-you-deck-DITZvcVZ.webp","/assets/yellow-and-black-QfL2eQK_.webp","/assets/red-and-white-CRNjYeHA.webp","/assets/black-and-yellow-Dk4eqnEg.webp","/assets/green-and-navy-KbXDwXIX.webp","/assets/gray-and-black-KFM3keZf.webp","/assets/grid-streaks-NrF-XPmH.webp"]),l(v,"WHEELS",["/assets/wheel-black-qLXQZ-16.webp","/assets/wheel-blue-k8cuEyZ1.webp","/assets/wheel-cream-MGIPodjC.webp","/assets/wheel-green-1B4Wx_ly.webp","/assets/wheel-navy-S1HX1Ufh.webp","/assets/wheel-pink-ymBUV6sQ.webp","/assets/wheel-purple-SzM0CubU.webp","/assets/wheel-red-m6gSMOZH.webp","/assets/wheel-yellow-T2Q4j7vG.webp"]);const E=[0,.3,0],T=[2.5,.75,0],C=i.createContext({wheel:v.WHEELS[0],updateWheels:()=>{},deck:v.DECKS[0],updateDeck:()=>{},truck:v.METALS[0],updateTrucks:()=>{},bolt:v.METALS[0],updateBolts:()=>{},lookAtDeck:()=>{},camera:i.createRef()}),P=({children:e})=>{const[t,s]=i.useState(v.WHEELS[0]),[a,r]=i.useState(v.METALS[0]),[o,l]=i.useState(v.DECKS[0]),[c,h]=i.useState(v.METALS[0]),{camera:m,lookAtBolts:u,lookAtTruck:p,lookAtWheel:w,lookAtDeck:g}=(()=>{const e=i.useRef(null),t=i.useCallback(((t,s)=>{e.current&&(e.current.setTarget(t.x,t.y,t.z,!0),e.current.setPosition(s.x,s.y,s.z,!0))}),[e]),s=i.useCallback((()=>{t(new d(0,.29,.5),new d(.4,.3,1))}),[t]),a=i.useCallback((()=>{t(new d(.2,.54,.65),new d(.4,1,.6))}),[t]),r=i.useCallback((()=>{t(new d(.15,.3,.62),new d(-.75,.35,.8))}),[t]),o=i.useCallback((()=>{t(new d(...E),new d(...T))}),[t]);return i.useMemo((()=>({camera:e,lookAtBolts:r,lookAtDeck:o,lookAtTruck:s,lookAtWheel:a})),[r,o,s,a])})(),j=i.useCallback(((e,t)=>s=>{e(s),t()}),[]),k=i.useMemo((()=>j(s,w)),[j,w]),x=i.useMemo((()=>j(h,p)),[j,p]),S=i.useMemo((()=>j(l,g)),[j,g]),b=i.useMemo((()=>j(r,u)),[j,u]),y=i.useMemo((()=>({camera:m,wheel:t,bolt:a,deck:o,truck:c,lookAtDeck:g,updateWheels:k,updateTrucks:x,updateDeck:S,updateBolts:b})),[t,a,o,c,m,g,k,x,S,b]);return n.jsx(C.Provider,{value:y,children:e})},I=()=>i.useContext(C),D=({selected:e,children:t,onClick:s,colorField:a,imageField:r,imageStyles:o})=>{const l=w("option",{selected:e}),c=i.useCallback((()=>{var e;s(null!=(e=null!=a?a:r)?e:"")}),[s,a,r]);return n.jsx("li",{children:n.jsxs("button",{className:l,onClick:c,children:[r?n.jsx("img",{src:r,alt:"",style:o}):n.jsx("div",{style:{backgroundColor:null!=a?a:void 0}}),n.jsx("span",{children:t})]})})},A=({title:e,selectedName:t,children:s})=>{const a=i.useMemo((()=>t?function(e){const t=e.split("/"),s=t[t.length-1],[a]=s.split(".");return a.replace(/-/g," ")}(t):""),[t]);return n.jsxs("div",{className:"options",children:[n.jsxs("div",{children:[n.jsx("h2",{children:e}),n.jsxs("p",{children:[n.jsx("span",{children:"| "}),a]})]}),n.jsx("ul",{children:s})]})};const W=e=>{const{deck:t,bolt:s,wheel:a,truck:r,updateBolts:o,updateDeck:l,updateTrucks:i,updateWheels:c}=I();return n.jsxs("div",{className:"controls",children:[n.jsx(A,{title:"Deck",selectedName:t,children:v.DECKS.map((e=>n.jsx(D,{imageField:e,onClick:l,imageStyles:{width:"500%",height:"500%",translate:"20% -0%",objectFit:"cover"},selected:e===t,children:e.replace(/-/g," ")},e)))}),n.jsx(A,{title:"Wheels",selectedName:a,children:v.WHEELS.map((e=>n.jsx(D,{imageField:e,onClick:c,imageStyles:{width:"125%",height:"125%",translate:"6% 8%",objectFit:"cover"},selected:e===a,children:e.replace(/-/g," ")},e)))}),n.jsx(A,{title:"Trucks",selectedName:r,children:v.METALS.map((e=>n.jsx(D,{colorField:e,onClick:i,selected:e===r,children:e.replace(/-/g," ")},e)))}),n.jsx(A,{title:"Bolts",selectedName:s,children:v.METALS.map((e=>n.jsx(D,{colorField:e,onClick:o,selected:e===s,children:e.replace(/-/g," ")},e)))})]})},B="/assets/warehouse-512-2HjUVqN4.hdr",L="/assets/concrete-normal-cZDGbQ2H.avif",F="#3b3a3a",N=e=>{const t=S(L,(e=>{k.wrap(e).repeat(e,30).rerender(e),e.anisotropy=8})),s=i.useMemo((()=>new m({roughness:.75,color:F,normalMap:t})),[t]);return n.jsx("mesh",{castShadow:!0,receiveShadow:!0,position:[0,-.005,0],rotation:[-Math.PI/2,0,0],material:s,children:n.jsx("circleGeometry",{args:[20,32]})})};S.preload(L);const H="/assets/Skateboard-I1tSJVsz.glb",G="/assets/griptape-diffuse-PcFuFE1u.webp",K="/assets/griptape-roughness-9ocPRl8P.webp";S.preload([G,K]);const O="/assets/metal-normal-61eyqixG.avif";S.preload(O);const R={side:{rotation:[0,0,Math.PI/2],position:[.25,.295,0]},upright:{rotation:[0,0,0],position:[0,0,0]}},X=({boltColor:e,truckColor:t,deckTexture:s,wheelTexture:a,pos:r="upright"})=>{const o=(()=>{const e=S(G),t=S(K);return i.useMemo((()=>{const s=new m({map:e,bumpMap:t,roughnessMap:t,bumpScale:3.5,roughness:.8,color:"#555"});return e&&k.wrap(e).repeat(e,9).rerender(e),t&&(k.wrap(t).repeat(t,9).rerender(t),t.anisotropy=8),s}),[e,t])})(),l=((e="#555")=>i.useMemo((()=>new m({color:e,metalness:.5,roughness:.3})),[e]))(e),n=((e="#555")=>{const t=S(O,(e=>{k.wrap(e).repeat(e,8).rerender(e),e.anisotropy=8}));return i.useMemo((()=>new m({color:e,metalness:.8,roughness:.25,normalMap:t,normalScale:new u(.3,.3)})),[e,t])})(t),c=(h=s,i.useMemo((()=>new m({roughness:.1,map:h})),[h]));var h;const d=(e=>i.useMemo((()=>new m({roughness:.35,map:e})),[e]))(a);return{position:i.useMemo((()=>R[r]),[r]),wheelMaterial:d,deckMaterial:c,truckMaterial:n,boltMaterial:l,gripTapeMaterial:o}},Q=()=>{const e=i.useRef([]),t=i.useCallback(((e,t)=>s=>{s&&(t.current[e]=s)}),[]),s=i.useMemo((()=>Array.from({length:4},((s,a)=>t(a,e)))),[t]);return[e,s]},U=i.forwardRef((function(e,t){const{nodes:s}=b(H),[a,r]=Q(),{position:o,boltMaterial:l,deckMaterial:c,truckMaterial:h,wheelMaterial:d,gripTapeMaterial:m}=X(e);return i.useImperativeHandle(t,(()=>({wheels:a})),[a]),n.jsx("group",{dispose:null,rotation:o.rotation,position:o.position,children:n.jsxs("group",{name:"Scene",children:[n.jsx("mesh",{name:"GripTape",castShadow:!0,receiveShadow:!0,material:m,geometry:s.GripTape.geometry,position:[0,.286,-.002]}),n.jsx("mesh",{name:"Wheel1",castShadow:!0,receiveShadow:!0,ref:r[0],geometry:s.Wheel1.geometry,material:d,position:[.238,.086,.635]}),n.jsx("mesh",{name:"Wheel2",castShadow:!0,receiveShadow:!0,ref:r[1],geometry:s.Wheel2.geometry,material:d,position:[-.237,.086,.635]}),n.jsx("mesh",{name:"Deck",castShadow:!0,receiveShadow:!0,geometry:s.Deck.geometry,material:c,position:[0,.271,-.002]}),n.jsx("mesh",{name:"Wheel4",castShadow:!0,receiveShadow:!0,ref:r[3],geometry:s.Wheel4.geometry,material:d,position:[-.238,.086,-.635],rotation:[Math.PI,0,Math.PI]}),n.jsx("mesh",{name:"Bolts",castShadow:!0,receiveShadow:!0,geometry:s.Bolts.geometry,material:l,position:[0,.198,0],rotation:[Math.PI,0,Math.PI]}),n.jsx("mesh",{name:"Wheel3",castShadow:!0,receiveShadow:!0,ref:r[2],geometry:s.Wheel3.geometry,material:d,position:[.237,.086,-.635],rotation:[Math.PI,0,Math.PI]}),n.jsx("mesh",{name:"Baseplates",castShadow:!0,receiveShadow:!0,geometry:s.Baseplates.geometry,material:h,position:[0,.211,0]}),n.jsx("mesh",{name:"Truck1",castShadow:!0,receiveShadow:!0,geometry:s.Truck1.geometry,material:h,position:[0,.101,-.617]}),n.jsx("mesh",{name:"Truck2",castShadow:!0,receiveShadow:!0,geometry:s.Truck2.geometry,material:h,position:[0,.101,.617],rotation:[Math.PI,0,Math.PI]})]})})}));x.isIOS&&b.preload(H);const Z="/assets/Skateboard-optimized-peBXX0LU.glb",z=i.forwardRef((function(e,t){const{nodes:s}=b(Z,void 0,void 0,x.extendGLTF),[a,r]=Q(),{position:o,boltMaterial:l,deckMaterial:c,truckMaterial:h,wheelMaterial:d,gripTapeMaterial:m}=X(e);return i.useImperativeHandle(t,(()=>({wheels:a})),[a]),n.jsxs("group",{dispose:null,rotation:o.rotation,position:o.position,children:[n.jsx("mesh",{castShadow:!0,receiveShadow:!0,material:m,geometry:s.GripTape.geometry,position:[0,.306,-.002],scale:1.149}),n.jsx("mesh",{castShadow:!0,receiveShadow:!0,ref:r[0],material:d,geometry:s.Wheel1.geometry,position:[.242,.086,.635],scale:.077}),n.jsx("mesh",{castShadow:!0,receiveShadow:!0,ref:r[1],material:d,geometry:s.Wheel2.geometry,position:[-.241,.086,.635],scale:.077}),n.jsx("mesh",{castShadow:!0,receiveShadow:!0,material:c,geometry:s.Deck.geometry,position:[0,.293,-.002],scale:1.163}),n.jsx("mesh",{castShadow:!0,receiveShadow:!0,ref:r[2],material:d,geometry:s.Wheel4.geometry,position:[-.242,.086,-.635],rotation:[-Math.PI,0,-Math.PI],scale:.077}),n.jsx("mesh",{castShadow:!0,receiveShadow:!0,material:l,geometry:s.Bolts.geometry,position:[0,.164,0],rotation:[-Math.PI,0,-Math.PI],scale:.703}),n.jsx("mesh",{castShadow:!0,receiveShadow:!0,ref:r[3],material:d,geometry:s.Wheel3.geometry,position:[.241,.086,-.635],rotation:[-Math.PI,0,-Math.PI],scale:.077}),n.jsx("mesh",{castShadow:!0,receiveShadow:!0,material:h,geometry:s.Baseplates.geometry,position:[0,.194,0],scale:.718}),n.jsx("mesh",{castShadow:!0,receiveShadow:!0,material:h,geometry:s.Truck1.geometry,position:[0,.125,-.595],scale:.285}),n.jsx("mesh",{castShadow:!0,receiveShadow:!0,material:h,geometry:s.Truck2.geometry,position:[0,.125,.595],rotation:[-Math.PI,0,-Math.PI],scale:.285})]})}));x.isIOS||b.preload(Z,void 0,void 0,x.extendGLTF);const q=i.forwardRef((function(e,t){return x.isIOS?n.jsx(U,o({ref:t},e)):n.jsx(z,o({ref:t},e))})),V=(e,t)=>{const s=(e=>{const t=S(e,(e=>{(Array.isArray(e)?t:[t]).forEach((e=>{e.flipY=!1,e.colorSpace=p,e.needsUpdate=!0}))}));return t})(e),a=i.useMemo((()=>{const t={},{length:s}=e;for(let a=0;a<s;a++)t[e[a]]=a;return t}),[e]),r=i.useMemo((()=>{var e;return null!=(e=a[null!=t?t:"-1"])?e:0}),[a,t]);return i.useMemo((()=>s[r]),[s,r])},Y="#6f6e6a";function _(e){j();const t=i.useRef(null),s=i.useRef(null),{camera:a,wheel:r,deck:o,bolt:l,truck:c,lookAtDeck:h}=I(),d=V(v.DECKS,o),m=V(v.WHEELS,r),u=null!=c?c:Y,p=null!=l?l:Y,w=i.useCallback((()=>{a.current&&t.current&&!a.current.colliderMeshes.length&&(a.current.colliderMeshes=[t.current])}),[a]);return i.useEffect((()=>{var e,t,a;if(null==(a=null==(t=null==(e=null==s?void 0:s.current)?void 0:e.wheels)?void 0:t.current)?void 0:a.length)for(const r of s.current.wheels.current)r&&g.to(r.rotation,{x:"+=30",duration:2.5,ease:"circ.out"})}),[r]),i.useEffect((()=>{a.current&&h()}),[h,a]),n.jsxs(i.Fragment,{children:[n.jsxs(i.Suspense,{fallback:null,children:[n.jsx(y,{files:B,environmentIntensity:.6}),n.jsx("directionalLight",{castShadow:!0,lookAt:[0,0,0],position:[1,1,1],intensity:1.6}),n.jsx("fog",{attach:"fog",args:[F,3,10]}),n.jsx("color",{attach:"background",args:[F]}),n.jsx(N,{}),n.jsxs("mesh",{rotation:[-Math.PI/2,0,0],ref:t,children:[n.jsx("planeGeometry",{args:[6,6]}),n.jsx("meshBasicMaterial",{visible:!1})]}),n.jsx(q,{pos:"side",ref:s,boltColor:p,truckColor:u,deckTexture:d,wheelTexture:m}),n.jsx(f,{makeDefault:!0,ref:a,maxDistance:4,minDistance:.2,onStart:w})]}),n.jsx(M,{all:!0})]})}function J(e){return n.jsx("div",{className:"skateboard-scene",children:n.jsxs(P,{children:[n.jsx("div",{className:"preview",children:n.jsx("div",{className:"canvas-container",children:n.jsx(c,{shadows:!0,camera:{fov:50,position:T},children:n.jsx(_,{})})})}),n.jsxs("div",{className:"options-menu",children:[n.jsx(h,{text:"Build Your Board"}),n.jsx(W,{})]})]})})}S.preload(v.bitmapTextures);export{J as default};
//# sourceMappingURL=index-fIWFxZOA.js.map

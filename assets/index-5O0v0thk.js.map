{"version":3,"mappings":"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","names":["Experiment","title","description","image","video","scene","preloading","useRef","videoNode","preloaded","setPreloaded","useState","preload","useCallback","current","_b","_a","play","call","oncanplaythrough","onerror","src","onMouseOut","pause","onClick","Labs","activateScene","classes","useClassNames","ready","jsxRuntimeExports","jsxs","role","tabIndex","className","onMouseEnter","onTouchStart","onTouchEnd","onMouseLeave","children","jsx","ref","loop","playsInline","autoPlay","muted","SplitHeading","As","text","LabsText","memo","_","id","Scene","active","useLabs","sceneComponent","LazyCarScene","CreateLazyComponent","loader","__vitePreload","import","then","v","default","CarScene","LazyMagazineScene","MagazineScene","LazyNetflixScene","NetflixScene","RipplesScene","useRipples","useEffect","onLoad","FullScreen","LazySkateboardScene","API","index","onUnmount","callback","fn","useUnmount","destroy","Page","name","map","item","i","__spreadValues"],"sources":["../../node_modules/@figliolia/react-hooks/dist/mjs/Hooks/useUnmount.js","../../src/Components/Experiment/index.tsx","../../src/Components/LabsText/index.tsx","../../src/Components/Scene/index.tsx","../../src/3D/CarScene/Lazy.tsx","../../src/3D/MagazineScene/Lazy.tsx","../../src/3D/Netflix/Lazy.tsx","../../src/3D/RipplesScene/index.tsx","../../src/3D/SkateboardScene/Lazy.tsx","../../src/Pages/Labs/API.tsx","../../src/Images/car-scene.webp","../../src/Videos/car-scene.mp4","../../src/Images/skateboard-configurator.webp","../../src/Videos/skateboard-configurator.mp4","../../src/Images/netflix-content-transition.webp","../../src/Videos/netflix-content-transition.mp4","../../src/Images/ripples.webp","../../src/Videos/ripples.mp4","../../src/Images/magazine-slider.webp","../../src/Videos/magazine-slider.mp4","../../src/Pages/Labs/index.tsx"],"sourcesContent":["import { useEffect, useRef } from \"react\";\nexport const useUnmount = (onUnmount) => {\n    const callback = useRef(onUnmount);\n    callback.current = onUnmount;\n    useEffect(() => {\n        const { current: fn } = callback;\n        return () => fn();\n    }, []);\n};\n","import { ReactNode, useCallback, useRef, useState } from \"react\";\nimport { useClassNames } from \"@figliolia/classnames\";\nimport { SplitHeading } from \"Components/SplitHeading\";\nimport { Labs } from \"State/Labs\";\nimport \"./styles.scss\";\n\nexport const Experiment = ({\n  title,\n  description,\n  image,\n  video,\n  scene,\n}: Props) => {\n  const preloading = useRef(false);\n  const videoNode = useRef<HTMLVideoElement>(null);\n  const [preloaded, setPreloaded] = useState(false);\n\n  const preload = useCallback(() => {\n    if (preloading.current || !videoNode.current) {\n      return;\n    }\n    if (preloaded) {\n      void videoNode.current?.play?.();\n      return;\n    }\n    preloading.current = true;\n    videoNode.current.oncanplaythrough = () => {\n      setPreloaded(true);\n      preloading.current = false;\n      void videoNode.current?.play?.();\n    };\n    videoNode.current.onerror = () => {\n      preloading.current = false;\n    };\n    videoNode.current.src = video;\n  }, [preloaded, video]);\n\n  const onMouseOut = useCallback(() => {\n    videoNode?.current?.pause?.();\n  }, []);\n\n  const onClick = useCallback(() => {\n    Labs.activateScene(scene);\n  }, [scene]);\n\n  const classes = useClassNames(\"experiment\", { ready: preloaded });\n\n  return (\n    <article\n      role=\"button\"\n      tabIndex={0}\n      onClick={onClick}\n      className={classes}\n      onMouseEnter={preload}\n      onTouchStart={preload}\n      onTouchEnd={onMouseOut}\n      onMouseLeave={onMouseOut}>\n      <div className=\"media\">\n        <video ref={videoNode} loop playsInline autoPlay muted src={video} />\n        <img src={image} />\n      </div>\n      <div className=\"meta\">\n        <SplitHeading As=\"h2\" text={title} />\n        <p>{description}</p>\n      </div>\n    </article>\n  );\n};\n\ninterface Props {\n  title: string;\n  description: string;\n  image: string;\n  video: string;\n  scene: ReactNode;\n}\n","import { memo } from \"react\";\nimport { SplitHeading } from \"Components/SplitHeading\";\nimport type { PropLess } from \"Tools/Types\";\nimport \"./styles.scss\";\n\nexport const LabsText = memo(\n  function LabsText(_: PropLess) {\n    return (\n      <div className=\"labs-text\">\n        <SplitHeading id=\"labsText\" text=\"Labs\" />\n      </div>\n    );\n  },\n  () => true,\n);\n","import { useClassNames } from \"@figliolia/classnames\";\nimport { ready, scene, useLabs } from \"State/Labs\";\nimport { PropLess } from \"Tools/Types\";\nimport \"./styles.scss\";\n\nexport const Scene = (_: PropLess) => {\n  const active = useLabs(ready);\n  const sceneComponent = useLabs(scene);\n  const classes = useClassNames(\"scene\", { active });\n  return <div className={classes}>{sceneComponent}</div>;\n};\n","import { CreateLazyComponent } from \"@figliolia/react-lazy\";\n\nexport const LazyCarScene = CreateLazyComponent({\n  loader: () => import(\"./index\").then(v => ({ default: v.CarScene })),\n});\n","import { CreateLazyComponent } from \"@figliolia/react-lazy\";\n\nexport const LazyMagazineScene = CreateLazyComponent({\n  loader: () => import(\"./index\").then(v => ({ default: v.MagazineScene })),\n});\n","import { CreateLazyComponent } from \"@figliolia/react-lazy\";\n\nexport const LazyNetflixScene = CreateLazyComponent({\n  loader: () => import(\"./index\").then(v => ({ default: v.NetflixScene })),\n});\n","import { useEffect } from \"react\";\nimport { FullScreen } from \"Components/FullScreen\";\nimport { useRipples } from \"Hooks/useRipples\";\nimport { Labs } from \"State/Labs\";\nimport { PropLess } from \"Tools/Types\";\nimport \"./styles.scss\";\n\nexport const RipplesScene = (_: PropLess) => {\n  const ref = useRipples();\n\n  useEffect(() => {\n    Labs.onLoad();\n  }, []);\n\n  return <FullScreen className=\"ripples-scene\" ref={ref} />;\n};\n","import { CreateLazyComponent } from \"@figliolia/react-lazy\";\n\nexport const LazySkateboardScene = CreateLazyComponent({\n  loader: () => import(\"./index\"),\n});\n","import { LazyCarScene } from \"3D/CarScene/Lazy\";\nimport { LazyMagazineScene } from \"3D/MagazineScene/Lazy\";\nimport { LazyNetflixScene } from \"3D/Netflix/Lazy\";\nimport { RipplesScene } from \"3D/RipplesScene\";\nimport { LazySkateboardScene } from \"3D/SkateboardScene/Lazy\";\nimport CarImage from \"Images/car-scene.webp\";\nimport MagazineImage from \"Images/magazine-slider.webp\";\nimport NetflixImage from \"Images/netflix-content-transition.webp\";\nimport RipplesImage from \"Images/ripples.webp\";\nimport SkateboardImage from \"Images/skateboard-configurator.webp\";\nimport CarVid from \"Videos/car-scene.mp4\";\nimport MagazineVideo from \"Videos/magazine-slider.mp4\";\nimport NetflixVideo from \"Videos/netflix-content-transition.mp4\";\nimport RipplesVideo from \"Videos/ripples.mp4\";\nimport SkateboardVideo from \"Videos/skateboard-configurator.mp4\";\n\nexport const API = [\n  {\n    title: \"Car Scene\",\n    description:\n      \"A guided three.js exercise in animation, lighting, and visual effects using a C8 Corvette\",\n    image: CarImage,\n    video: CarVid,\n    scene: <LazyCarScene />,\n  },\n  {\n    title: \"Skateboard Configurator\",\n    description:\n      \"A guided three.js tutorial building a CMS driven product configurator\",\n    image: SkateboardImage,\n    video: SkateboardVideo,\n    scene: <LazySkateboardScene />,\n  },\n  {\n    title: \"Netflix Design Concept\",\n    description:\n      \"A webGL experiment replacing all media on the netflix home page with WebGL shaders\",\n    image: NetflixImage,\n    video: NetflixVideo,\n    scene: <LazyNetflixScene />,\n  },\n  {\n    title: \"WebGL Ripples\",\n    description:\n      \"A dependency-free webGL shader library that brings water ripples to ordinary background images\",\n    image: RipplesImage,\n    video: RipplesVideo,\n    scene: <RipplesScene />,\n  },\n  {\n    title: \"Magazine Slider\",\n    description: \"A fun image slider originally designed by Wassim Samad\",\n    image: MagazineImage,\n    video: MagazineVideo,\n    scene: <LazyMagazineScene />,\n  },\n] as const;\n","export default \"__VITE_ASSET___iOh_$Ui__\"","export default \"__VITE_ASSET__USvigzXn__\"","export default \"__VITE_ASSET__Ggska8ZM__\"","export default \"__VITE_ASSET__xiN_Pmhz__\"","export default \"__VITE_ASSET__8MBbvqIB__\"","export default \"__VITE_ASSET__ptVW13$8__\"","export default \"__VITE_ASSET__YzqEpbLs__\"","export default \"__VITE_ASSET__9x6oJLu6__\"","export default \"__VITE_ASSET__HpfhwPzX__\"","export default \"__VITE_ASSET__4QmNIuJ8__\"","import { memo } from \"react\";\nimport { useClassNames } from \"@figliolia/classnames\";\nimport { useUnmount } from \"@figliolia/react-hooks\";\nimport { Experiment } from \"Components/Experiment\";\nimport { LabsText } from \"Components/LabsText\";\nimport { Page } from \"Components/Page\";\nimport { Scene } from \"Components/Scene\";\nimport { useMenuButtonDelay } from \"Hooks/useMenuButtonDelay\";\nimport { Labs, ready, useLabs } from \"State/Labs\";\nimport type { PropLess } from \"Tools/Types\";\nimport { API } from \"./API\";\nimport \"./styles.scss\";\n\nexport default memo(\n  function LabsPage(_: PropLess) {\n    const active = useLabs(ready);\n    useMenuButtonDelay();\n\n    useUnmount(() => {\n      Labs.destroy();\n    });\n\n    const classes = useClassNames(\"labs\", { \"no-scroll\": active });\n\n    return (\n      <Page name={classes}>\n        <div className=\"heading\">\n          <LabsText />\n        </div>\n        <div className=\"experiments\">\n          {API.map((item, i) => (\n            <Experiment key={i} {...item} />\n          ))}\n        </div>\n        <Scene />\n      </Page>\n    );\n  },\n  () => false,\n);\n"],"file":"assets/index-5O0v0thk.js"}
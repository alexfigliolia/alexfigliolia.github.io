var e=Object.defineProperty,t=Object.defineProperties,s=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,r=(t,s,i)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[s]=i,a=(e,t)=>{for(var s in t||(t={}))n.call(t,s)&&r(e,s,t[s]);if(i)for(var s of i(t))o.call(t,s)&&r(e,s,t[s]);return e},l=(e,i)=>t(e,s(i)),c=(e,t)=>{var s={};for(var r in e)n.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(null!=e&&i)for(var r of i(e))t.indexOf(r)<0&&o.call(e,r)&&(s[r]=e[r]);return s},u=(e,t,s)=>(r(e,"symbol"!=typeof t?t+"":t,s),s);import{r as h,v as m,w as g,x as v,E as d,j as f,u as p,q as w,y as x,z as y}from"./index-V6KHFFTR.js";import{q as j,S as b,U as M,I,o as C,V as S,g as R,n as z,a as P,u as E,A as D,G as k}from"./index-DsY_2V6a.js";import{P as T}from"./PerspectiveCamera-PT3-WYbM.js";import{g as F}from"./index-b4RP9EQ6.js";import{d as L}from"./MathUtils-DiN6UX3T.js";class O{constructor(e,t=null,s=null){u(this,"value"),u(this,"previous",null),u(this,"next",null),this.value=e,this.next=s,this.previous=t}}class V{constructor(...e){u(this,"size",0),u(this,"head",null),u(this,"tail",null);for(const t of e)this.push(t)}push(e){this.size++;const t=new O(e);return this.head||this.tail?(this.tail.next=t,t.previous=this.tail,this.tail=t,this.size):(this.head=t,this.tail=t,this.size)}unshift(e){this.size++;const t=new O(e);return this.head||this.tail?(this.head.previous=t,t.next=this.head,this.head=t,this.size):(this.head=t,this.tail=t,this.size)}shift(){if(!this.head)return;this.size--;const e=this.head;return this.head===this.tail?(this.head=null,this.tail=null,e.value):(this.head=e.next,this.head.previous=null,e.value)}pop(){if(!this.tail)return;this.size--;const e=this.tail;return this.head===this.tail?(this.head=null,this.tail=null,e.value):(this.tail=e.previous,this.tail.next=null,e.value)}peekLeft(){var e;return null==(e=this.head)?void 0:e.value}peekRight(){var e;return null==(e=this.tail)?void 0:e.value}*[Symbol.iterator](){let e=this.head;for(;e;)yield e.value,e=e.next}}const N=e=>h.useRef(e).current;class U{}u(U,"MOVIES",["/assets/12-angry-men-TUdHNY6a.jpg","/assets/a-working-man-xnKT6OFl.jpg","/assets/ballerina-v_yRG6QJ.jpg","/assets/clown-in-a-cornfield--3FwHLQu.jpg","/assets/final-destination-bloodlines-7cxzVIjo.jpg","/assets/forrest-gump-t3ZWLoUz.jpg","/assets/goodfellas-T78n_oV_.jpg","/assets/how-to-train-your-dragon-EwSxK9gD.jpg","/assets/interstellar-ArRQ9udZ.jpg","/assets/jewel-thief-kz5MXsh7.jpg","/assets/ko-DKMpZdrZ.jpg","/assets/life-is-beautifu-gZJ3OsiY.jpg","/assets/liloandstitch-d9k6p34G.jpg","/assets/lord-of-the-rings-2jU3WXge.jpg","/assets/mikaela-4Z5nFgxg.jpg","/assets/minecraft-qrSXPs4F.jpg","/assets/mission-impossible-Vyt69OkE.jpg","/assets/preditor-killer-stCTcuay.jpg","/assets/pulp-fiction-IdqJeFgY.jpg","/assets/schindlers-list-b55Nw919.jpg","/assets/seven-samurai-efToq6vE.jpg","/assets/shadow-force-nCKq5jw-.jpg","/assets/sinners-CPdEJpAI.jpg","/assets/the-accountant-ijNVZAqa.jpg","/assets/the-amateur-JEyMtBYX.jpg","/assets/the-dark-knight-MfLR0ise.jpg","/assets/the-godfather-ecYDV7RX.jpg","/assets/the-godfather-2-RXHGRCNN.jpg","/assets/the-good-bad-ugly-XubvdTur.jpg","/assets/the-green-mile-4WlZFm6K.jpg","/assets/the-last-stand-a32vXGLK.jpg","/assets/the-shawshank-redemption-5Z5TqfbV.jpg"]),u(U,"SHOWS",["/assets/andy-cohen-HA5UIcTG.jpg","/assets/anne-with-ane-_8Y_Cj3F.jpg","/assets/arcane-IfWKtPoD.jpg","/assets/attack-on-titan-GBWwFrft.jpg","/assets/avatar-yGvTSk1r.jpg","/assets/better-call-saul-A12PobHR.jpg","/assets/breaking-bad-8f3l05qb.jpg","/assets/chernobyl-cuw0_OIj.jpg","/assets/csi-ZvArXVAV.jpg","/assets/dine-with-me-rCfLl-YT.jpg","/assets/fighting-spirit-pOSdRx-K.jpg","/assets/fionna-and-cake-CcaL2CoF.jpg","/assets/frieren-lJGW8RwZ.jpg","/assets/fullmetal-alchemist-il0Pm8pv.jpg","/assets/graham-show-yx5vkH_y.jpg","/assets/grave-fireflies-XateGJ9T.jpg","/assets/grays-anatomy-FCI7nNbN.jpg","/assets/hazbin-hotel-r76HkK3a.jpg","/assets/hunter-IFm2GPCs.jpg","/assets/james-cordon-YjvISu26.jpg","/assets/late-night-c4WvjfcR.jpg","/assets/law-and-order-xlnnQr5n.jpg","/assets/nova-u1VxoACA.jpg","/assets/one-piece-m2JkSKwZ.jpg","/assets/parasite-ITJxaKmY.jpg","/assets/real-time-1UZg6zL-.jpg","/assets/rick-and-morty-LwTyC-39.jpg","/assets/spirited-away-FGnK0kEi.jpg","/assets/straw-MwOJqRNu.jpg","/assets/the-amazing-race-lvICMo5o.jpg","/assets/the-choses--yvjMfeB.jpg","/assets/the-daily-show--z9JkdcP.jpg","/assets/the-late-show-craig-Q4qC-PbF.jpg","/assets/the-late-show-steve-uydAu6ru.jpg","/assets/the-late-show-o0PWiHhV.jpg","/assets/the-owl-house-Bm_aUX5B.jpg","/assets/the-sopranos-nw3_fNNN.jpg","/assets/the-tonight-show-SCeaG4x3.jpg","/assets/the-ugly-stepsister-t9nwfyY8.jpg","/assets/tonight-show-eI2YanI1.jpg","/assets/worrior-queen-Y2Tls6Nt.jpg","/assets/your-name-GMpU-fF-.jpg"]);var X=NaN,B="[object Symbol]",_=/^\s+|\s+$/g,H=/^[-+]0x[0-9a-f]+$/i,W=/^0b[01]+$/i,Y=/^0o[0-7]+$/i,q=parseInt,G="object"==typeof m&&m&&m.Object===Object&&m,Z="object"==typeof self&&self&&self.Object===Object&&self,J=G||Z||Function("return this")(),A=Object.prototype.toString,K=Math.max,$=Math.min,Q=function(){return J.Date.now()};function ee(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function te(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&A.call(e)==B}(e))return X;if(ee(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=ee(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(_,"");var s=W.test(e);return s||Y.test(e)?q(e.slice(2),s?2:8):H.test(e)?X:+e}const se=g((function(e,t,s){var i,n,o,r,a,l,c=0,u=!1,h=!1,m=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function g(t){var s=i,o=n;return i=n=void 0,c=t,r=e.apply(o,s)}function v(e){var s=e-l;return void 0===l||s>=t||s<0||h&&e-c>=o}function d(){var e=Q();if(v(e))return f(e);a=setTimeout(d,function(e){var s=t-(e-l);return h?$(s,o-(e-c)):s}(e))}function f(e){return a=void 0,m&&i?g(e):(i=n=void 0,r)}function p(){var e=Q(),s=v(e);if(i=arguments,n=this,l=e,s){if(void 0===a)return function(e){return c=e,a=setTimeout(d,t),u?g(e):r}(l);if(h)return a=setTimeout(d,t),g(l)}return void 0===a&&(a=setTimeout(d,t)),r}return t=te(t)||0,ee(s)&&(u=!!s.leading,o=(h="maxWait"in s)?K(te(s.maxWait)||0,t):o,m="trailing"in s?!!s.trailing:m),p.cancel=function(){void 0!==a&&clearTimeout(a),c=0,i=l=n=a=void 0},p.flush=function(){return void 0===a?r:f(Q())},p}));class ie{constructor(e=1/0){u(this,"maxStackSize"),u(this,"queue"),u(this,"currentFrame",null),this.maxStackSize=e,this.queue=new V}run(e){this.queue.push(e),this.execute()}execute(){null===this.currentFrame&&(this.currentFrame=requestAnimationFrame((e=>{var t;const s=performance.now();for(let i=0;i<this.maxStackSize&&this.queue.size;i++){null==(t=this.queue.shift())||t(e);if(performance.now()-s>=16)break}this.onPool()})))}onPool(){this.currentFrame=null,this.queue.size&&this.execute()}}class ne{constructor(e=("undefined"==typeof window?"shim":window)){u(this,"rootScrollX",0),u(this,"rootScrollY",0),u(this,"root"),u(this,"initialized",!1),u(this,"desiredRoot"),u(this,"FramePooler",new ie),u(this,"activeImage",null),u(this,"deactivatingImage",null),u(this,"debounceImageEmission",se((()=>{this.emitEvent("images",this.imageState)}),50)),u(this,"imageIDs",new v),u(this,"imageData",new Map),u(this,"Emitter",new d),u(this,"scrollViews",new Map),u(this,"onScrollRoot",(()=>{this.withRoot((e=>{const{x:t,y:s}=this.getScrollCoordinates(e);for(const[i,{images:n}]of this.scrollViews)this.isRootsChild(i)&&this.FramePooler.run((()=>{for(const[e,t]of n){const s=this.imageData.get(e);s&&(this.imageData.set(e,this.mutateImageData(s,t.getBoundingClientRect().toJSON())),this.repositionImage(e))}}));this.rootScrollY=s,this.rootScrollX=t}))})),u(this,"onScrollViewScroll",(e=>{const t=e.target,s=this.scrollViews.get(t);if(!s)return;const{scrollY:i,scrollX:n,images:o}=s,{scrollLeft:r,scrollTop:a}=t,l=n-r,c=i-a;0===l&&0===c||(this.FramePooler.run((()=>{for(const[e]of o){const t=this.imageData.get(e);(null==t?void 0:t.mesh)&&(t.mesh.position.x+=l,t.mesh.position.y+=c)}})),s.scrollX=r,s.scrollY=a,this.scrollViews.set(t,s))})),u(this,"onWindowResize",(()=>{this.FramePooler.run((()=>{for(const[e,t]of this.imageData)this.imageData.set(e,this.mutateImageData(t,t.image.getBoundingClientRect().toJSON())),this.FramePooler.run((()=>{this.resizeImage(e),this.repositionImage(e)}))}))})),this.desiredRoot=e}initialize(){if(this.initialized)return;this.initialized=!0,this.root=this.findRoot(this.desiredRoot);const{y:e,x:t}=this.getScrollCoordinates(this.root);this.rootScrollY=e,this.rootScrollX=t,window.addEventListener("resize",this.onWindowResize),this.root.addEventListener("scroll",this.onScrollRoot)}destroy(){if(this.Emitter.storage.clear(),this.initialized){this.initialized=!1,window.removeEventListener("resize",this.onWindowResize),this.withRoot((e=>{e.removeEventListener("scroll",this.onScrollRoot)}));for(const[e]of this.scrollViews)e.removeEventListener("scroll",this.onScrollViewScroll)}}subscribeToImages(e){return e(this.imageState),this.subscribe("images",e)}unsubscribeFromImages(e){return this.unsubscribe("images",e)}unmountScrollView(e){this.scrollViews.delete(e),e.removeEventListener("scroll",this.onScrollViewScroll)}registerImage(e,t){var s;const i=this.imageIDs.get();for(const n of t){const t=null!=(s=this.scrollViews.get(n))?s:this.registerScrollView(n);t.images.set(i,e),this.scrollViews.set(n,t)}return this.imageData.set(i,a({ID:i,image:e},e.getBoundingClientRect().toJSON())),this.debounceImageEmission(),i}unmountImage(e,t){const s=this.imageData.get(e);if(s){for(const e of t){const t=this.scrollViews.get(e);t&&(t.images.delete(s.ID),this.scrollViews.set(e,t))}this.imageData.delete(e),this.debounceImageEmission()}}registerMesh(e,t){const s=this.imageData.get(e);s&&(s.mesh=t,this.imageData.set(e,s),this.FramePooler.run((()=>{this.resizeImage(e),this.repositionImage(e)})))}disposeMesh(e){const t=this.imageData.get(e);t&&(t.mesh=void 0,this.imageData.set(e,t))}emitEvent(e,t){this.Emitter.emit(e,t)}subscribe(e,t){return this.Emitter.on(e,t)}unsubscribe(e,t){return this.Emitter.off(e,t)}activateImage(e){this.activeImage&&(this.deactivatingImage=this.activeImage),e&&this.emitEvent(e,{type:"activation",position:{x:0,y:0}}),this.activeImage=e,this.debounceImageEmission()}resetDeactivatedImage(){this.deactivatingImage=null,this.debounceImageEmission()}getImageData(e){return this.imageData.get(e)}registerScrollView(e){return this.scrollViews.set(e,{scrollY:e.scrollTop,scrollX:e.scrollLeft,images:new Map}),e.addEventListener("scroll",this.onScrollViewScroll),this.scrollViews.get(e)}findRoot(e){if("string"==typeof e){const t=document.querySelector(e);if(!t)throw new Error('Root node with selector "${root}" as not found');return t}return e}resizeImage(e){const t=this.imageData.get(e);if(!t)return;const{width:s,height:i,mesh:n}=t;n&&n.scale.set(s,i,1)}repositionImage(e){const t=this.imageData.get(e);if(!t)return;const{width:s,height:i,left:n,top:o,mesh:r}=t;if(!r)return;const a=n-window.innerWidth/2+s/2,l=-o+window.innerHeight/2-i/2;r.position.set(a,l,1)}getScrollCoordinates(e){return e===window?{x:e.scrollX,y:e.scrollY}:e instanceof HTMLElement?{x:e.scrollLeft,y:e.scrollTop}:{x:0,y:0}}withRoot(e){this.root&&e(this.root)}isRootsChild(e){return!!this.root&&(this.root===window||this.root instanceof HTMLElement&&this.root.contains(e))}get imageState(){return{activeImage:this.activeImage,deactivatingImage:this.deactivatingImage,images:Array.from(this.imageData.values())}}mutateImageData(e,t){for(const s in t){const i=s;void 0!==t[i]&&(e[i]=t[i])}return e}}const oe=h.createContext(new ne("shim")),re=({children:e,root:t})=>{const s=h.useMemo((()=>new ne(t)),[t]);return h.useEffect((()=>(s.initialize(),()=>{s.destroy()})),[s]),f.jsx(oe,{value:s,children:e})},ae=()=>{const[e,t]=h.useState(!1),s=h.useContext(oe);return h.useEffect((()=>{const e=s.subscribeToImages((({activeImage:e})=>{t(!!e)}));return()=>{s.unsubscribeFromImages(e)}}),[s]),e},le=h.createContext([]),ce=({scrollView:e,children:t})=>{const s=h.use(le),i=h.useMemo((()=>[...s,e]),[s,e]);return f.jsx(le,{value:i,children:t})},ue=(...e)=>h.useCallback((t=>{for(const s of e)"function"==typeof s?s(t):s&&(s.current=t)}),[e]),he=e=>f.jsx("svg",l(a({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.7071 4.29289C16.0976 4.68342 16.0976 5.31658 15.7071 5.70711L9.41421 12L15.7071 18.2929C16.0976 18.6834 16.0976 19.3166 15.7071 19.7071C15.3166 20.0976 14.6834 20.0976 14.2929 19.7071L7.29289 12.7071C7.10536 12.5196 7 12.2652 7 12C7 11.7348 7.10536 11.4804 7.29289 11.2929L14.2929 4.29289C14.6834 3.90237 15.3166 3.90237 15.7071 4.29289Z"})})),me=e=>f.jsx("svg",l(a({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{children:f.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.29289 4.29289C8.68342 3.90237 9.31658 3.90237 9.70711 4.29289L16.7071 11.2929C17.0976 11.6834 17.0976 12.3166 16.7071 12.7071L9.70711 19.7071C9.31658 20.0976 8.68342 20.0976 8.29289 19.7071C7.90237 19.3166 7.90237 18.6834 8.29289 18.2929L14.5858 12L8.29289 5.70711C7.90237 5.31658 7.90237 4.68342 8.29289 4.29289Z"})})),ge=h.forwardRef((function({title:e,onNext:t,children:s,className:i,onPrevious:n,"aria-label":o},r){const a=h.useId(),l=h.useRef(null),c=p("content-list",i),u=ue(l,r),m=h.useCallback((e=>{l.current&&e(l.current)}),[]),g=h.useCallback((()=>{if(!l.current)return{width:0,scrollWidth:0,scrollLeft:0};const{offsetWidth:e,scrollWidth:t,scrollLeft:s}=l.current;return{width:e,scrollWidth:t,scrollLeft:s}}),[]),v=h.useCallback((()=>{const{width:e,scrollLeft:t}=g();m((s=>{t>0&&(s.scrollBy({left:-e,behavior:"smooth"}),null==n||n())}))}),[n,g,m]),d=h.useCallback((()=>{const{width:e,scrollWidth:s,scrollLeft:i}=g();m((n=>{i<s&&(n.scrollBy({left:e,behavior:"smooth"}),null==t||t())}))}),[m,g,t]);return f.jsxs("section",{className:c,children:[f.jsx("h2",{children:e}),f.jsxs("div",{className:"content-list__content",children:[f.jsx("button",{onClick:v,className:"content-list__scroller previous","aria-controls":a,"aria-label":"Previous Page",children:f.jsx(he,{"aria-hidden":!0})}),f.jsx("div",{ref:u,id:a,className:"content-list__items","aria-label":o,"aria-roledescription":"carousel",children:s}),f.jsx("button",{onClick:d,className:"content-list__scroller next","aria-controls":a,"aria-label":"Next Page",children:f.jsx(me,{"aria-hidden":!0})})]})]})})),ve=e=>{const t=h.use(oe),s=h.useRef(null);return h.useEffect((()=>{if(!s.current)return;const e=s.current;return()=>{t.unmountScrollView(e)}}),[t]),f.jsx(ce,{scrollView:s,children:f.jsx(ge,a({ref:s},e))})},de=e=>{const t=ae(),s=h.useContext(oe),i=h.useCallback((()=>{s.activateImage(null)}),[s]),n=p("back-button",{visible:t});return f.jsx("button",{onClick:i,className:n,children:"Back"})},fe=e=>{const t=ae(),s=p("backdrop",{visible:t});return f.jsx("div",{className:s})},pe=e=>{const t=w(x),s=h.useMemo((()=>2*Math.atan(t/2/1e3)*(180/Math.PI)),[t]);return f.jsx(T,{fov:s,makeDefault:!0,"position-z":1e3})},we=(e,t="varying vec2 vUv;\nvarying vec2 vPos;\n\nvoid main() {\n  gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);\n  vUv = uv;\n  vPos = position.xy;\n}",s="varying vec2 vUv;\nvarying vec2 vPos;\nuniform vec2 scale;\nuniform vec2 imageBounds;\nuniform float resolution;\nuniform vec3 color;\nuniform sampler2D map;\nuniform float radius;\nuniform float zoom;\nuniform float grayscale;\nuniform float opacity;\nconst vec3 luma = vec3(.299, 0.587, 0.114);\n\nvec4 toGrayscale(vec4 color, float intensity) {\n  return vec4(mix(color.rgb, vec3(dot(color.rgb, luma)), intensity), color.a);\n}\nvec2 aspect(vec2 size) {\n  return size / min(size.x, size.y);\n}\n\nconst float PI = 3.14159265;\n  \n// from https://iquilezles.org/articles/distfunctions\nfloat udRoundBox( vec2 p, vec2 b, float r ) {\n  return length(max(abs(p)-b+r,0.0))-r;\n}\n\nvoid main() {\n  vec2 s = aspect(scale);\n  vec2 i = aspect(imageBounds);\n  float rs = s.x / s.y;\n  float ri = i.x / i.y;\n  vec2 new = rs < ri ? vec2(i.x * s.y / i.y, s.y) : vec2(s.x, i.y * s.x / i.x);\n  vec2 offset = (rs < ri ? vec2((new.x - s.x) / 2.0, 0.0) : vec2(0.0, (new.y - s.y) / 2.0)) / new;\n  vec2 uv = vUv * s / new + offset;\n  vec2 zUv = (uv - vec2(0.5, 0.5)) / zoom + vec2(0.5, 0.5);\n\n  vec2 res = vec2(scale * resolution);\n  vec2 halfRes = 0.5 * res;\n  float b = udRoundBox(vUv.xy * res - halfRes, halfRes, resolution * radius);    \n  vec3 a = mix(vec3(1.0,0.0,0.0), vec3(0.0,0.0,0.0), smoothstep(0.0, 1.0, b));\n  gl_FragColor = toGrayscale(texture2D(map, zUv) * vec4(color, opacity * a), grayscale);\n  \n  #include <tonemapping_fragment>\n  #include <colorspace_fragment>\n}")=>{return i=a({color:new C("white"),scale:new S(1,1),imageBounds:new S(1,1),resolution:1024,map:null,zoom:1,radius:0,grayscale:0,transparent:!0,opacity:1},e),n=t,o=s,(l=class extends b{constructor(e){super(a({vertexShader:n,fragmentShader:o},e));for(const t in i)this.uniforms[t]=new M(i[t]),Object.defineProperty(this,t,{get(){return this.uniforms[t].value},set(e){this.uniforms[t].value=e}});this.uniforms=I.clone(this.uniforms),null==r||r(this)}}).key=j.generateUUID(),l;var i,n,o,r,l},xe=new S(.5,.5),ye=((...e)=>{const t=we(...e);return h.forwardRef((function(e,s){var i=e,{url:n,color:o,side:r,segments:u=1,zoom:m=1,grayscale:g=0,opacity:v=1,radius:d=0,toneMapped:p,transparent:w,scale:x=[1,1]}=i,y=c(i,["url","color","side","segments","zoom","grayscale","opacity","radius","toneMapped","transparent","scale"]);R({ImageMaterial:t});const[j,b]=x,M=z(n),I=P((e=>e.size)),C=h.useRef(null),S=ue(C,s),E=h.useMemo((()=>[M.image.width,M.image.height]),[M]),D=h.useMemo((()=>Math.max(I.width,I.height)),[I]);return h.useLayoutEffect((()=>{if(C.current&&C.current.geometry.parameters){const{width:e,height:t}=C.current.geometry.parameters;C.current.material.scale.set(j*e,b*t)}}),[j,b]),f.jsxs("mesh",l(a({ref:S},y),{scale:[j,b,1],children:[f.jsx("planeGeometry",{args:[1,1,u,u]}),f.jsx("imageMaterial",{color:o,map:M,zoom:m,grayscale:g,opacity:v,scale:x,imageBounds:E,resolution:D,radius:d,toneMapped:p,transparent:w,side:r})]}))}))})({uTime:0,uOpacity:1,uHoverState:0,uXPointerFromCenter:0,uMouseCoordinates:xe.clone()},"varying vec2 vUv;\nuniform float uTime;\nuniform vec2 uHover;\nuniform float uXPointerFromCenter;\nuniform vec2 uMouseCoordinates;\nuniform float uHoverState;\nvarying float vPointerDistance;\nvarying float vNoise;\n\nvoid main() {\n  vec3 newPosition = position;\n  \n  vPointerDistance = distance(uv, uMouseCoordinates);\n\n  newPosition.z += uHoverState * 10. * sin((1. - vPointerDistance) * 5. + uTime * 5.);\n\n  newPosition.x += uXPointerFromCenter / 30.;\n\n  gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(newPosition, 1.);\n\n  vNoise = vPointerDistance * uHoverState * 1.5;\n\n  vUv = uv;\n} ","varying vec2 vUv;\nuniform vec2 scale;\nuniform vec2 imageBounds;\nuniform float resolution;\nuniform vec3 color;\nuniform sampler2D map;\nuniform float radius;\nuniform float zoom;\nuniform float grayscale;\nuniform float opacity;\nvarying float vPointerDistance;\nvarying float vNoise;\nuniform float uHoverState;\nuniform float uOpacity;\n\nconst vec3 luma = vec3(.299, 0.587, 0.114);\n\nvec4 toGrayscale(vec4 color, float intensity) {\n  return vec4(mix(color.rgb, vec3(dot(color.rgb, luma)), intensity), color.a);\n}\nvec2 aspect(vec2 size) {\n  return size / min(size.x, size.y);\n}\n\nconst float PI = 3.14159265;\n  \n// from https://iquilezles.org/articles/distfunctions\nfloat udRoundBox( vec2 p, vec2 b, float r ) {\n  return length(max(abs(p)-b+r,0.0))-r;\n}\n\nvoid main() {\n  vec2 s = aspect(scale);\n  vec2 i = aspect(imageBounds);\n  float rs = s.x / s.y;\n  float ri = i.x / i.y;\n  vec2 new = rs < ri ? vec2(i.x * s.y / i.y, s.y) : vec2(s.x, i.y * s.x / i.x);\n  vec2 offset = (rs < ri ? vec2((new.x - s.x) / 2.0, 0.0) : vec2(0.0, (new.y - s.y) / 2.0)) / new;\n  vec2 uv = vUv * s / new + offset;\n  vec2 zUv = (uv - vec2(0.5, 0.5)) / zoom + vec2(0.5, 0.5);\n\n  vec2 res = vec2(scale * resolution);\n  vec2 halfRes = 0.5 * res;\n  float b = udRoundBox(vUv.xy * res - halfRes, halfRes, resolution * radius);    \n  vec3 a = mix(vec3(1.0,0.0,0.0), vec3(0.0,0.0,0.0), smoothstep(0.0, 1.0, b));\n\n  vec4 imageTexture = toGrayscale(texture2D(map, zUv) * vec4(color, opacity * a), grayscale);\n\n  gl_FragColor = imageTexture;\n  gl_FragColor.rgb += 0.1 * vec3(vNoise);\n  gl_FragColor.a = uOpacity;\n\n  #include <tonemapping_fragment>\n  #include <colorspace_fragment>\n}");class je{constructor(){u(this,"mesh",null),u(this,"cacheReference",(e=>{this.mesh=e}))}get meshXY(){return this.withMesh((e=>{const{x:t,y:s}=e.position;return{"position-x":t,"position-y":s}}))}withMesh(e){if(this.mesh)return e(this.mesh)}withMaterial(e){return this.withMesh((t=>e(t.material)))}}let be=class extends je{constructor(){super(...arguments),u(this,"onPointer",(({type:e,position:t})=>{switch(e){case"pointer-enter":return void this.onPointerEnter(t);case"pointer-move":return void this.onPointerMove(t);case"pointer-leave":return void this.onPointerLeave();case"activation":return void this.fadeMesh();case"deactivation":return void this.revealMesh();default:return}}))}get meshPosition(){if(this.mesh){const{x:e,y:t}=this.mesh.position;return{"position-x":e,"position-y":t}}}onPointerEnter({x:e,y:t}){this.withMaterial((s=>{this.transitionUniforms([[s.uniforms.uHoverState,1]]),s.uniforms.uMouseCoordinates.value=new S(e,t)}))}onPointerMove(e){const{x:t,y:s}=this.pointerEventFromCenter(e);this.withMaterial((s=>{this.transitionVector2(s.uniforms.uMouseCoordinates.value,new S(e.x,e.y),.25),this.transitionUniforms([[s.uniforms.uXPointerFromCenter,t]])})),this.withMesh((e=>{this.rotateMesh(e,.1*t,-.1*s)}))}onPointerLeave(){this.withMaterial((e=>{this.transitionUniforms([[e.uniforms.uHoverState,0],[e.uniforms.uXPointerFromCenter,0]]),this.transitionVector2(e.uniforms.uMouseCoordinates.value,xe,.25)})),this.withMesh((e=>{this.rotateMesh(e,0,0)}))}pointerEventFromCenter(e){return{x:this.pointerFromCenter(e.x),y:this.pointerFromCenter(e.y)}}pointerFromCenter(e){return e<=.5?.5-e:-(e-.5)}transitionUniforms(e){for(const[t,s]of e)F.to(t,{duration:.5,value:s})}transitionVector2(e,t,s=.5){F.to(e,l(a({},t),{duration:s}))}rotateMesh(e,t,s){F.to(e.rotation,{duration:.5,y:t,x:s})}fadeMesh(){this.withMaterial((e=>{F.to(e.uniforms.uOpacity,{duration:.2,delay:.1,value:0})}))}revealMesh(){this.withMaterial((e=>{F.to(e.uniforms.uOpacity,{duration:.1,value:1})}))}};const Me=({ID:e,image:t,width:s,height:i})=>{const n=h.use(oe),o=N(new be);return h.useEffect((()=>{if(!o.mesh)return;n.registerMesh(e,o.mesh);const t=n.subscribe(e,o.onPointer);return()=>{n.disposeMesh(e),n.unsubscribe(e,t)}}),[n,o,e]),E(((e,t)=>{o.withMaterial((e=>{e.uniforms.uTime.value=e.uniforms.uTime.value+t}))})),f.jsx(ye,{"position-z":0,scale:[s,i],ref:o.cacheReference,url:`${t.src}?bypass-cors-please`})},Ie=e=>{const t=h.use(oe),[s,i]=h.useState([]);return h.useEffect((()=>{const e=t.subscribeToImages((({images:e})=>{i(e)}));return()=>{t.unsubscribeFromImages(e)}}),[t]),f.jsx(h.Fragment,{children:s.map((({width:e,height:t,ID:s,image:i})=>f.jsx(Me,{ID:s,image:i,width:e,height:t},s)))})};class Ce extends je{activate(e=0){this.withMesh((t=>{const{x:s,y:i}=t.scale;let n,o;window.innerWidth<window.innerHeight?(n=window.innerWidth,o=n*i/s):(o=window.innerHeight,n=o*s/i),F.timeline().to(t.scale,{y:o,x:n,duration:1,ease:"power2.inOut"}).to(t.position,{x:0,y:0,duration:1,ease:"power2.inOut"},0).to(t.rotation,{y:this.rotateBy(e,!0),duration:.3},.1).to(t.rotation,{y:0,duration:.6},.4)}))}deactivate({width:e,height:t,positionX:s=0,positionY:i=0,onTransitionComplete:n}){this.withMesh((o=>{F.timeline({onComplete:n}).to(o.scale,{x:e,y:t,duration:1,ease:"power2.inOut"}).to(o.position,{x:s,y:i,z:1,duration:1,ease:"power2.inOut"},0).to(o.rotation,{y:this.rotateBy(s,!0),duration:.4},.1).to(o.rotation,{y:0,duration:.5},.5)}))}rotateBy(e,t){return L(50*e/(window.innerWidth/(2*(t?-1:1))))}}const Se=e=>{var t,s,i,n,o=e,{ID:r,image:u,width:m,height:g,activating:v,deactivating:d}=o,p=c(o,["ID","image","width","height","activating","deactivating"]);const w=h.use(oe),x=N(new Ce),y=h.useRef(w.getImageData(r));return h.useEffect((()=>{var e,t,s;const{x:i,y:n}=null!=(s=null==(t=null==(e=y.current)?void 0:e.mesh)?void 0:t.position)?s:{x:0,y:0};v?x.activate(i):d&&x.deactivate({width:m,height:g,positionX:i,positionY:n,onTransitionComplete:()=>{w.resetDeactivatedImage(),w.emitEvent(r,{type:"deactivation",position:{x:0,y:0}})}})}),[r,v,d,x,m,g,w]),f.jsx(ye,l(a({},p),{"position-z":1,scale:[m,g],ref:x.cacheReference,url:`${u.src}?bypass-cors-please`,"position-x":null==(s=null==(t=y.current)?void 0:t.mesh)?void 0:s.position.x,"position-y":null==(n=null==(i=y.current)?void 0:i.mesh)?void 0:n.position.y}))},Re=e=>e.activating||e.deactivating?f.jsx(Se,a({},e)):null,ze=e=>{const t=h.use(oe),[s,i]=h.useState({images:[],activeImage:null,deactivatingImage:null});return h.useEffect((()=>{const e=t.subscribeToImages(i);return()=>{t.unsubscribeFromImages(e)}}),[t]),f.jsx(h.Fragment,{children:s.images.map((({width:e,height:t,ID:i,image:n})=>f.jsx(Re,{ID:i,image:n,width:e,height:t,activating:i===s.activeImage,deactivating:i===s.deactivatingImage},i)))})},Pe=({children:e})=>f.jsxs(re,{root:"#netflixGLTarget",children:[e,f.jsx("div",{className:"webgl-images","aria-hidden":!0,children:f.jsxs(D,{flat:!0,linear:!0,style:{pointerEvents:"none"},gl:{antialias:!0,alpha:!0},children:[f.jsx(k,{}),f.jsxs(h.Suspense,{children:[f.jsx(pe,{}),f.jsx(Ie,{})]})]})}),f.jsx("div",{className:"webgl-transition-element",children:f.jsx(D,{flat:!0,linear:!0,style:{pointerEvents:"none"},gl:{antialias:!0,alpha:!0},children:f.jsxs(h.Suspense,{children:[f.jsx(pe,{}),f.jsx(ze,{})]})})}),f.jsx(de,{}),f.jsx(fe,{})]}),Ee=h.forwardRef((function(e,t){var s=e,{title:i,posterURL:n,className:o,onClick:r}=s,u=c(s,["title","posterURL","className","onClick"]);const m=h.useMemo((()=>f.jsx("img",{ref:t,src:n,alt:i})),[n,i,t]);return f.jsx("div",l(a({role:"group",className:y("content-poster",o)},u),{children:r?f.jsx("button",{onClick:r,children:m}):m}))})),De=e=>{const t=h.use(oe),s=h.useRef(null),i=h.use(le),[n,o]=h.useState(null);h.useEffect((()=>{if(!s.current)return;const e=[];for(const{current:t}of i)t&&e.push(t);const n=t.registerImage(s.current,e);return o(n),()=>{t.unmountImage(n,e)}}),[t,i]);const r=h.useCallback((e=>{if(!s.current)return;let t,i;if("touches"in e){if(!e.touches[0])return;({clientX:t,clientY:i}=e.touches[0])}else({clientX:t,clientY:i}=e);const{left:n,top:o,width:r,height:a}=s.current.getBoundingClientRect();return{x:Math.abs((t-n)/r),y:1-Math.abs((i-o)/a)}}),[]),c=h.useCallback((e=>s=>{const i=r(s);i&&n&&t.emitEvent(n,{type:e,position:i})}),[r,t,n]),u=h.useMemo((()=>c("pointer-enter")),[c]),m=h.useMemo((()=>c("pointer-move")),[c]),g=h.useMemo((()=>c("pointer-leave")),[c]),v=h.useCallback((()=>{n&&t.activateImage(n)}),[n,t]);return f.jsx(Ee,l(a({ref:s},e),{onClick:v,onMouseEnter:u,onTouchStart:u,onMouseMove:m,onTouchMove:m,onMouseLeave:g,onTouchEnd:g}))},ke=e=>{const t=w(x);return f.jsxs("div",{id:"netflixGLTarget",className:"netflix-scene",style:{maxHeight:t,height:t},children:[f.jsxs(Pe,{children:[f.jsx(ve,{title:"Popular Movies","aria-label":"Popular Movies",children:U.MOVIES.map(((e,t)=>f.jsx(De,{posterURL:e},t)))}),f.jsx(ve,{title:"Popular Shows","aria-label":"Popular Shows",children:U.SHOWS.map(((e,t)=>f.jsx(De,{posterURL:e},t)))}),f.jsx(ve,{title:"Top Rated Movies","aria-label":"Top Rated Movies",children:U.MOVIES.map(((e,t)=>f.jsx(De,{posterURL:e},t)))}),f.jsx(ve,{title:"Top Rated Shows","aria-label":"Top Rated Shows",children:U.SHOWS.map(((e,t)=>f.jsx(De,{posterURL:e},t)))})]}),f.jsx("div",{className:"padding"})]})};export{ke as NetflixScene};
//# sourceMappingURL=index-JH4qjBCr.js.map

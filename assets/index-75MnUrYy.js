var e=Object.defineProperty,t=Object.defineProperties,s=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable,r=(t,s,i)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[s]=i,a=(e,t)=>{for(var s in t||(t={}))n.call(t,s)&&r(e,s,t[s]);if(i)for(var s of i(t))o.call(t,s)&&r(e,s,t[s]);return e},l=(e,i)=>t(e,s(i)),c=(e,t)=>{var s={};for(var r in e)n.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(null!=e&&i)for(var r of i(e))t.indexOf(r)<0&&o.call(e,r)&&(s[r]=e[r]);return s},u=(e,t,s)=>(r(e,"symbol"!=typeof t?t+"":t,s),s);import{g as h,h as m,r as g,j as d,e as v,u as f,b as p,C as w}from"./threeFiber-wgP-k_4X.js";import{t as x,E as j,u as y,p as b,v as M,w as I}from"./index-vnxVQw40.js";import{u as C}from"./useLabsLoader-sbj82o42.js";import{P as S,s as R,a as z}from"./threeDrei-TbYxsnpq.js";import{u as P}from"./index-QujLB7B5.js";import{d as E,g as D}from"./three-71H3Suoo.js";import{g as L}from"./gsap-b4RP9EQ6.js";import{d as F}from"./MathUtils-DiN6UX3T.js";import"./threeStdLib-Ui_sxDIS.js";import"./useMenuButtonDelay-zuaUPvJn.js";import"./index-Q32q9bKT.js";class T{constructor(e,t=null,s=null){u(this,"value"),u(this,"previous",null),u(this,"next",null),this.value=e,this.next=s,this.previous=t}}class k{constructor(...e){u(this,"size",0),u(this,"head",null),u(this,"tail",null);for(const t of e)this.push(t)}push(e){this.size++;const t=new T(e);return this.head||this.tail?(this.tail.next=t,t.previous=this.tail,this.tail=t,this.size):(this.head=t,this.tail=t,this.size)}unshift(e){this.size++;const t=new T(e);return this.head||this.tail?(this.head.previous=t,t.next=this.head,this.head=t,this.size):(this.head=t,this.tail=t,this.size)}shift(){if(!this.head)return;this.size--;const e=this.head;return this.head===this.tail?(this.head=null,this.tail=null,e.value):(this.head=e.next,this.head.previous=null,e.value)}pop(){if(!this.tail)return;this.size--;const e=this.tail;return this.head===this.tail?(this.head=null,this.tail=null,e.value):(this.tail=e.previous,this.tail.next=null,e.value)}peekLeft(){var e;return null==(e=this.head)?void 0:e.value}peekRight(){var e;return null==(e=this.tail)?void 0:e.value}*[Symbol.iterator](){let e=this.head;for(;e;)yield e.value,e=e.next}}class O{}u(O,"MOVIES",["/assets/12-angry-men-TUdHNY6a.jpg","/assets/a-working-man-xnKT6OFl.jpg","/assets/ballerina-v_yRG6QJ.jpg","/assets/clown-in-a-cornfield--3FwHLQu.jpg","/assets/final-destination-bloodlines-7cxzVIjo.jpg","/assets/forrest-gump-t3ZWLoUz.jpg","/assets/goodfellas-T78n_oV_.jpg","/assets/how-to-train-your-dragon-EwSxK9gD.jpg","/assets/interstellar-ArRQ9udZ.jpg","/assets/jewel-thief-kz5MXsh7.jpg","/assets/ko-DKMpZdrZ.jpg","/assets/life-is-beautifu-gZJ3OsiY.jpg","/assets/liloandstitch-d9k6p34G.jpg","/assets/lord-of-the-rings-2jU3WXge.jpg","/assets/mikaela-4Z5nFgxg.jpg","/assets/minecraft-qrSXPs4F.jpg","/assets/mission-impossible-Vyt69OkE.jpg","/assets/preditor-killer-stCTcuay.jpg","/assets/pulp-fiction-IdqJeFgY.jpg","/assets/schindlers-list-b55Nw919.jpg","/assets/seven-samurai-efToq6vE.jpg","/assets/shadow-force-nCKq5jw-.jpg","/assets/sinners-CPdEJpAI.jpg","/assets/the-accountant-ijNVZAqa.jpg","/assets/the-amateur-JEyMtBYX.jpg","/assets/the-dark-knight-MfLR0ise.jpg","/assets/the-godfather-ecYDV7RX.jpg","/assets/the-godfather-2-RXHGRCNN.jpg","/assets/the-good-bad-ugly-XubvdTur.jpg","/assets/the-green-mile-4WlZFm6K.jpg","/assets/the-last-stand-a32vXGLK.jpg","/assets/the-shawshank-redemption-5Z5TqfbV.jpg"]),u(O,"SHOWS",["/assets/andy-cohen-HA5UIcTG.jpg","/assets/anne-with-ane-_8Y_Cj3F.jpg","/assets/arcane-IfWKtPoD.jpg","/assets/attack-on-titan-GBWwFrft.jpg","/assets/avatar-yGvTSk1r.jpg","/assets/better-call-saul-A12PobHR.jpg","/assets/breaking-bad-8f3l05qb.jpg","/assets/chernobyl-cuw0_OIj.jpg","/assets/csi-ZvArXVAV.jpg","/assets/dine-with-me-rCfLl-YT.jpg","/assets/fighting-spirit-pOSdRx-K.jpg","/assets/fionna-and-cake-CcaL2CoF.jpg","/assets/frieren-lJGW8RwZ.jpg","/assets/fullmetal-alchemist-il0Pm8pv.jpg","/assets/graham-show-yx5vkH_y.jpg","/assets/grave-fireflies-XateGJ9T.jpg","/assets/grays-anatomy-FCI7nNbN.jpg","/assets/hazbin-hotel-r76HkK3a.jpg","/assets/hunter-IFm2GPCs.jpg","/assets/james-cordon-YjvISu26.jpg","/assets/late-night-c4WvjfcR.jpg","/assets/law-and-order-xlnnQr5n.jpg","/assets/nova-u1VxoACA.jpg","/assets/one-piece-m2JkSKwZ.jpg","/assets/parasite-ITJxaKmY.jpg","/assets/real-time-1UZg6zL-.jpg","/assets/rick-and-morty-LwTyC-39.jpg","/assets/spirited-away-FGnK0kEi.jpg","/assets/straw-MwOJqRNu.jpg","/assets/the-amazing-race-lvICMo5o.jpg","/assets/the-choses--yvjMfeB.jpg","/assets/the-daily-show--z9JkdcP.jpg","/assets/the-late-show-craig-Q4qC-PbF.jpg","/assets/the-late-show-steve-uydAu6ru.jpg","/assets/the-late-show-o0PWiHhV.jpg","/assets/the-owl-house-Bm_aUX5B.jpg","/assets/the-sopranos-nw3_fNNN.jpg","/assets/the-tonight-show-SCeaG4x3.jpg","/assets/the-ugly-stepsister-t9nwfyY8.jpg","/assets/tonight-show-eI2YanI1.jpg","/assets/worrior-queen-Y2Tls6Nt.jpg","/assets/your-name-GMpU-fF-.jpg"]);var N=NaN,V="[object Symbol]",U=/^\s+|\s+$/g,B=/^[-+]0x[0-9a-f]+$/i,X=/^0b[01]+$/i,_=/^0o[0-7]+$/i,H=parseInt,W="object"==typeof h&&h&&h.Object===Object&&h,Y="object"==typeof self&&self&&self.Object===Object&&self,q=W||Y||Function("return this")(),G=Object.prototype.toString,Z=Math.max,J=Math.min,A=function(){return q.Date.now()};function K(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function $(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&G.call(e)==V}(e))return N;if(K(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=K(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(U,"");var s=X.test(e);return s||_.test(e)?H(e.slice(2),s?2:8):B.test(e)?N:+e}const Q=m((function(e,t,s){var i,n,o,r,a,l,c=0,u=!1,h=!1,m=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function g(t){var s=i,o=n;return i=n=void 0,c=t,r=e.apply(o,s)}function d(e){var s=e-l;return void 0===l||s>=t||s<0||h&&e-c>=o}function v(){var e=A();if(d(e))return f(e);a=setTimeout(v,function(e){var s=t-(e-l);return h?J(s,o-(e-c)):s}(e))}function f(e){return a=void 0,m&&i?g(e):(i=n=void 0,r)}function p(){var e=A(),s=d(e);if(i=arguments,n=this,l=e,s){if(void 0===a)return function(e){return c=e,a=setTimeout(v,t),u?g(e):r}(l);if(h)return a=setTimeout(v,t),g(l)}return void 0===a&&(a=setTimeout(v,t)),r}return t=$(t)||0,K(s)&&(u=!!s.leading,o=(h="maxWait"in s)?Z($(s.maxWait)||0,t):o,m="trailing"in s?!!s.trailing:m),p.cancel=function(){void 0!==a&&clearTimeout(a),c=0,i=l=n=a=void 0},p.flush=function(){return void 0===a?r:f(A())},p}));class ee{constructor(e=1/0){u(this,"maxStackSize"),u(this,"queue"),u(this,"currentFrame",null),this.maxStackSize=e,this.queue=new k}run(e){this.queue.push(e),this.execute()}execute(){null===this.currentFrame&&(this.currentFrame=requestAnimationFrame((e=>{var t;const s=performance.now();for(let i=0;i<this.maxStackSize&&this.queue.size;i++){null==(t=this.queue.shift())||t(e);if(performance.now()-s>=16)break}this.onPool()})))}onPool(){this.currentFrame=null,this.queue.size&&this.execute()}}class te{constructor(e=("undefined"==typeof window?"shim":window)){u(this,"rootScrollX",0),u(this,"rootScrollY",0),u(this,"root"),u(this,"initialized",!1),u(this,"desiredRoot"),u(this,"FramePooler",new ee),u(this,"activeImage",null),u(this,"deactivatingImage",null),u(this,"debounceImageEmission",Q((()=>{this.emitEvent("images",this.imageState)}),50)),u(this,"imageIDs",new x),u(this,"imageData",new Map),u(this,"Emitter",new j),u(this,"scrollViews",new Map),u(this,"onScrollRoot",(()=>{this.withRoot((e=>{const{x:t,y:s}=this.getScrollCoordinates(e);for(const[i,{images:n}]of this.scrollViews)this.isRootsChild(i)&&this.FramePooler.run((()=>{for(const[e,t]of n){const s=this.imageData.get(e);s&&(this.imageData.set(e,this.mutateImageData(s,t.getBoundingClientRect().toJSON())),this.repositionImage(e))}}));this.rootScrollY=s,this.rootScrollX=t}))})),u(this,"onScrollViewScroll",(e=>{const t=e.target,s=this.scrollViews.get(t);if(!s)return;const{scrollY:i,scrollX:n,images:o}=s,{scrollLeft:r,scrollTop:a}=t,l=n-r,c=i-a;0===l&&0===c||(this.FramePooler.run((()=>{for(const[e]of o){const t=this.imageData.get(e);(null==t?void 0:t.mesh)&&(t.mesh.position.x+=l,t.mesh.position.y+=c)}})),s.scrollX=r,s.scrollY=a,this.scrollViews.set(t,s))})),u(this,"onWindowResize",(()=>{this.FramePooler.run((()=>{for(const[e,t]of this.imageData)this.imageData.set(e,this.mutateImageData(t,t.image.getBoundingClientRect().toJSON())),this.FramePooler.run((()=>{this.resizeImage(e),this.repositionImage(e)}))}))})),this.desiredRoot=e}initialize(){if(this.initialized)return;this.initialized=!0,this.root=this.findRoot(this.desiredRoot);const{y:e,x:t}=this.getScrollCoordinates(this.root);this.rootScrollY=e,this.rootScrollX=t,window.addEventListener("resize",this.onWindowResize),this.root.addEventListener("scroll",this.onScrollRoot)}destroy(){if(this.Emitter.storage.clear(),this.initialized){this.initialized=!1,window.removeEventListener("resize",this.onWindowResize),this.withRoot((e=>{e.removeEventListener("scroll",this.onScrollRoot)}));for(const[e]of this.scrollViews)e.removeEventListener("scroll",this.onScrollViewScroll)}}subscribeToImages(e){return e(this.imageState),this.subscribe("images",e)}unsubscribeFromImages(e){return this.unsubscribe("images",e)}unmountScrollView(e){this.scrollViews.delete(e),e.removeEventListener("scroll",this.onScrollViewScroll)}registerImage(e,t){var s;const i=this.imageIDs.get();for(const n of t){const t=null!=(s=this.scrollViews.get(n))?s:this.registerScrollView(n);t.images.set(i,e),this.scrollViews.set(n,t)}return this.imageData.set(i,a({ID:i,image:e},e.getBoundingClientRect().toJSON())),this.debounceImageEmission(),i}unmountImage(e,t){const s=this.imageData.get(e);if(s){for(const e of t){const t=this.scrollViews.get(e);t&&(t.images.delete(s.ID),this.scrollViews.set(e,t))}this.imageData.delete(e),this.debounceImageEmission()}}registerMesh(e,t){const s=this.imageData.get(e);s&&(s.mesh=t,this.imageData.set(e,s),this.FramePooler.run((()=>{this.resizeImage(e),this.repositionImage(e)})))}disposeMesh(e){const t=this.imageData.get(e);t&&(t.mesh=void 0,this.imageData.set(e,t))}emitEvent(e,t){this.Emitter.emit(e,t)}subscribe(e,t){return this.Emitter.on(e,t)}unsubscribe(e,t){return this.Emitter.off(e,t)}activateImage(e){this.activeImage&&(this.deactivatingImage=this.activeImage),e&&this.emitEvent(e,{type:"activation",position:{x:0,y:0}}),this.activeImage=e,this.debounceImageEmission()}resetDeactivatedImage(){this.deactivatingImage=null,this.debounceImageEmission()}getImageData(e){return this.imageData.get(e)}registerScrollView(e){return this.scrollViews.set(e,{scrollY:e.scrollTop,scrollX:e.scrollLeft,images:new Map}),e.addEventListener("scroll",this.onScrollViewScroll),this.scrollViews.get(e)}findRoot(e){if("string"==typeof e){const t=document.querySelector(e);if(!t)throw new Error('Root node with selector "${root}" as not found');return t}return e}resizeImage(e){const t=this.imageData.get(e);if(!t)return;const{width:s,height:i,mesh:n}=t;n&&n.scale.set(s,i,1)}repositionImage(e){const t=this.imageData.get(e);if(!t)return;const{width:s,height:i,left:n,top:o,mesh:r}=t;if(!r)return;const a=n-window.innerWidth/2+s/2,l=-o+window.innerHeight/2-i/2;r.position.set(a,l,1)}getScrollCoordinates(e){return e===window?{x:e.scrollX,y:e.scrollY}:e instanceof HTMLElement?{x:e.scrollLeft,y:e.scrollTop}:{x:0,y:0}}withRoot(e){this.root&&e(this.root)}isRootsChild(e){return!!this.root&&(this.root===window||this.root instanceof HTMLElement&&this.root.contains(e))}get imageState(){return{activeImage:this.activeImage,deactivatingImage:this.deactivatingImage,images:Array.from(this.imageData.values())}}mutateImageData(e,t){for(const s in t){const i=s;void 0!==t[i]&&(e[i]=t[i])}return e}}const se=g.createContext(new te("shim")),ie=({children:e,root:t})=>{const s=g.useMemo((()=>new te(t)),[t]);return g.useEffect((()=>(s.initialize(),()=>{s.destroy()})),[s]),d.jsx(se,{value:s,children:e})},ne=()=>{const[e,t]=g.useState(!1),s=g.useContext(se);return g.useEffect((()=>{const e=s.subscribeToImages((({activeImage:e})=>{t(!!e)}));return()=>{s.unsubscribeFromImages(e)}}),[s]),e},oe=g.createContext([]),re=({scrollView:e,children:t})=>{const s=g.use(oe),i=g.useMemo((()=>[...s,e]),[s,e]);return d.jsx(oe,{value:i,children:t})},ae=(...e)=>g.useCallback((t=>{for(const s of e)"function"==typeof s?s(t):s&&(s.current=t)}),[e]),le=e=>d.jsx("svg",l(a({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{children:d.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.7071 4.29289C16.0976 4.68342 16.0976 5.31658 15.7071 5.70711L9.41421 12L15.7071 18.2929C16.0976 18.6834 16.0976 19.3166 15.7071 19.7071C15.3166 20.0976 14.6834 20.0976 14.2929 19.7071L7.29289 12.7071C7.10536 12.5196 7 12.2652 7 12C7 11.7348 7.10536 11.4804 7.29289 11.2929L14.2929 4.29289C14.6834 3.90237 15.3166 3.90237 15.7071 4.29289Z"})})),ce=e=>d.jsx("svg",l(a({viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),{children:d.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.29289 4.29289C8.68342 3.90237 9.31658 3.90237 9.70711 4.29289L16.7071 11.2929C17.0976 11.6834 17.0976 12.3166 16.7071 12.7071L9.70711 19.7071C9.31658 20.0976 8.68342 20.0976 8.29289 19.7071C7.90237 19.3166 7.90237 18.6834 8.29289 18.2929L14.5858 12L8.29289 5.70711C7.90237 5.31658 7.90237 4.68342 8.29289 4.29289Z"})})),ue=g.forwardRef((function({title:e,onNext:t,children:s,className:i,onPrevious:n,"aria-label":o},r){const a=g.useId(),l=g.useRef(null),c=y("content-list",i),u=ae(l,r),h=g.useCallback((e=>{l.current&&e(l.current)}),[]),m=g.useCallback((()=>{if(!l.current)return{width:0,scrollWidth:0,scrollLeft:0};const{offsetWidth:e,scrollWidth:t,scrollLeft:s}=l.current;return{width:e,scrollWidth:t,scrollLeft:s}}),[]),v=g.useCallback((()=>{const{width:e,scrollLeft:t}=m();h((s=>{t>0&&(s.scrollBy({left:-e,behavior:"smooth"}),null==n||n())}))}),[n,m,h]),f=g.useCallback((()=>{const{width:e,scrollWidth:s,scrollLeft:i}=m();h((n=>{i<s&&(n.scrollBy({left:e,behavior:"smooth"}),null==t||t())}))}),[h,m,t]);return d.jsxs("section",{className:c,children:[d.jsx("h2",{children:e}),d.jsxs("div",{className:"content-list__content",children:[d.jsx("button",{onClick:v,className:"content-list__scroller previous","aria-controls":a,"aria-label":"Previous Page",children:d.jsx(le,{"aria-hidden":!0})}),d.jsx("div",{ref:u,id:a,className:"content-list__items","aria-label":o,"aria-roledescription":"carousel",children:s}),d.jsx("button",{onClick:f,className:"content-list__scroller next","aria-controls":a,"aria-label":"Next Page",children:d.jsx(ce,{"aria-hidden":!0})})]})]})})),he=e=>{const t=g.use(se),s=g.useRef(null);return g.useEffect((()=>{if(!s.current)return;const e=s.current;return()=>{t.unmountScrollView(e)}}),[t]),d.jsx(re,{scrollView:s,children:d.jsx(ue,a({ref:s},e))})},me=e=>{const t=ne(),s=g.useContext(se),i=g.useCallback((()=>{s.activateImage(null)}),[s]),n=y("back-button",{visible:t});return d.jsx("button",{onClick:i,className:n,children:"Back"})},ge=e=>{const t=ne(),s=y("backdrop",{visible:t});return d.jsx("div",{className:s})},de=e=>{const t=b(M),s=g.useMemo((()=>2*Math.atan(t/2/1e3)*(180/Math.PI)),[t]);return d.jsx(S,{fov:s,makeDefault:!0,"position-z":1e3})},ve=new D(.5,.5),fe=((...e)=>{const t=((e,t="varying vec2 vUv;\nvarying vec2 vPos;\n\nvoid main() {\n  gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);\n  vUv = uv;\n  vPos = position.xy;\n}",s="varying vec2 vUv;\nvarying vec2 vPos;\nuniform vec2 scale;\nuniform vec2 imageBounds;\nuniform float resolution;\nuniform vec3 color;\nuniform sampler2D map;\nuniform float radius;\nuniform float zoom;\nuniform float grayscale;\nuniform float opacity;\nconst vec3 luma = vec3(.299, 0.587, 0.114);\n\nvec4 toGrayscale(vec4 color, float intensity) {\n  return vec4(mix(color.rgb, vec3(dot(color.rgb, luma)), intensity), color.a);\n}\nvec2 aspect(vec2 size) {\n  return size / min(size.x, size.y);\n}\n\nconst float PI = 3.14159265;\n  \n// from https://iquilezles.org/articles/distfunctions\nfloat udRoundBox( vec2 p, vec2 b, float r ) {\n  return length(max(abs(p)-b+r,0.0))-r;\n}\n\nvoid main() {\n  vec2 s = aspect(scale);\n  vec2 i = aspect(imageBounds);\n  float rs = s.x / s.y;\n  float ri = i.x / i.y;\n  vec2 new = rs < ri ? vec2(i.x * s.y / i.y, s.y) : vec2(s.x, i.y * s.x / i.x);\n  vec2 offset = (rs < ri ? vec2((new.x - s.x) / 2.0, 0.0) : vec2(0.0, (new.y - s.y) / 2.0)) / new;\n  vec2 uv = vUv * s / new + offset;\n  vec2 zUv = (uv - vec2(0.5, 0.5)) / zoom + vec2(0.5, 0.5);\n\n  vec2 res = vec2(scale * resolution);\n  vec2 halfRes = 0.5 * res;\n  float b = udRoundBox(vUv.xy * res - halfRes, halfRes, resolution * radius);    \n  vec3 a = mix(vec3(1.0,0.0,0.0), vec3(0.0,0.0,0.0), smoothstep(0.0, 1.0, b));\n  gl_FragColor = toGrayscale(texture2D(map, zUv) * vec4(color, opacity * a), grayscale);\n  \n  #include <tonemapping_fragment>\n  #include <colorspace_fragment>\n}")=>R(a({color:new E("white"),scale:new D(1,1),imageBounds:new D(1,1),resolution:1024,map:null,zoom:1,radius:0,grayscale:0,transparent:!0,opacity:1},e),t,s))(...e);return g.forwardRef((function(e,s){var i=e,{url:n,color:o,side:r,segments:u=1,zoom:h=1,grayscale:m=0,opacity:p=1,radius:w=0,toneMapped:x,transparent:j,scale:y=[1,1]}=i,b=c(i,["url","color","side","segments","zoom","grayscale","opacity","radius","toneMapped","transparent","scale"]);v({ImageMaterial:t});const[M,I]=y,C=z(n),S=f((e=>e.size)),R=g.useRef(null),P=ae(R,s),E=g.useMemo((()=>[C.image.width,C.image.height]),[C]),D=g.useMemo((()=>Math.max(S.width,S.height)),[S]);return g.useLayoutEffect((()=>{if(R.current&&R.current.geometry.parameters){const{width:e,height:t}=R.current.geometry.parameters;R.current.material.scale.set(M*e,I*t)}}),[M,I]),d.jsxs("mesh",l(a({ref:P},b),{scale:[M,I,1],children:[d.jsx("planeGeometry",{args:[1,1,u,u]}),d.jsx("imageMaterial",{color:o,map:C,zoom:h,grayscale:m,opacity:p,scale:y,imageBounds:E,resolution:D,radius:w,toneMapped:x,transparent:j,side:r})]}))}))})({uTime:0,uOpacity:1,uHoverState:0,uXPointerFromCenter:0,uMouseCoordinates:ve.clone()},"varying vec2 vUv;\nuniform float uTime;\nuniform vec2 uHover;\nuniform float uXPointerFromCenter;\nuniform vec2 uMouseCoordinates;\nuniform float uHoverState;\nvarying float vPointerDistance;\nvarying float vNoise;\n\nvoid main() {\n  vec3 newPosition = position;\n  \n  vPointerDistance = distance(uv, uMouseCoordinates);\n\n  newPosition.z += uHoverState * 10. * sin((1. - vPointerDistance) * 5. + uTime * 5.);\n\n  newPosition.x += uXPointerFromCenter / 30.;\n\n  gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(newPosition, 1.);\n\n  vNoise = vPointerDistance * uHoverState * 1.5;\n\n  vUv = uv;\n} ","varying vec2 vUv;\nuniform vec2 scale;\nuniform vec2 imageBounds;\nuniform float resolution;\nuniform vec3 color;\nuniform sampler2D map;\nuniform float radius;\nuniform float zoom;\nuniform float grayscale;\nuniform float opacity;\nvarying float vPointerDistance;\nvarying float vNoise;\nuniform float uHoverState;\nuniform float uOpacity;\n\nconst vec3 luma = vec3(.299, 0.587, 0.114);\n\nvec4 toGrayscale(vec4 color, float intensity) {\n  return vec4(mix(color.rgb, vec3(dot(color.rgb, luma)), intensity), color.a);\n}\nvec2 aspect(vec2 size) {\n  return size / min(size.x, size.y);\n}\n\nconst float PI = 3.14159265;\n  \n// from https://iquilezles.org/articles/distfunctions\nfloat udRoundBox( vec2 p, vec2 b, float r ) {\n  return length(max(abs(p)-b+r,0.0))-r;\n}\n\nvoid main() {\n  vec2 s = aspect(scale);\n  vec2 i = aspect(imageBounds);\n  float rs = s.x / s.y;\n  float ri = i.x / i.y;\n  vec2 new = rs < ri ? vec2(i.x * s.y / i.y, s.y) : vec2(s.x, i.y * s.x / i.x);\n  vec2 offset = (rs < ri ? vec2((new.x - s.x) / 2.0, 0.0) : vec2(0.0, (new.y - s.y) / 2.0)) / new;\n  vec2 uv = vUv * s / new + offset;\n  vec2 zUv = (uv - vec2(0.5, 0.5)) / zoom + vec2(0.5, 0.5);\n\n  vec2 res = vec2(scale * resolution);\n  vec2 halfRes = 0.5 * res;\n  float b = udRoundBox(vUv.xy * res - halfRes, halfRes, resolution * radius);    \n  vec3 a = mix(vec3(1.0,0.0,0.0), vec3(0.0,0.0,0.0), smoothstep(0.0, 1.0, b));\n\n  vec4 imageTexture = toGrayscale(texture2D(map, zUv) * vec4(color, opacity * a), grayscale);\n\n  gl_FragColor = imageTexture;\n  gl_FragColor.rgb += 0.1 * vec3(vNoise);\n  gl_FragColor.a = uOpacity;\n\n  #include <tonemapping_fragment>\n  #include <colorspace_fragment>\n}");class pe{constructor(){u(this,"mesh",null),u(this,"cacheReference",(e=>{this.mesh=e}))}get meshXY(){return this.withMesh((e=>{const{x:t,y:s}=e.position;return{"position-x":t,"position-y":s}}))}withMesh(e){if(this.mesh)return e(this.mesh)}withMaterial(e){return this.withMesh((t=>e(t.material)))}}let we=class extends pe{constructor(){super(...arguments),u(this,"onPointer",(({type:e,position:t})=>{switch(e){case"pointer-enter":return void this.onPointerEnter(t);case"pointer-move":return void this.onPointerMove(t);case"pointer-leave":return void this.onPointerLeave();case"activation":return void this.fadeMesh();case"deactivation":return void this.revealMesh();default:return}}))}get meshPosition(){if(this.mesh){const{x:e,y:t}=this.mesh.position;return{"position-x":e,"position-y":t}}}onPointerEnter({x:e,y:t}){this.withMaterial((s=>{this.transitionUniforms([[s.uniforms.uHoverState,1]]),s.uniforms.uMouseCoordinates.value=new D(e,t)}))}onPointerMove(e){const{x:t,y:s}=this.pointerEventFromCenter(e);this.withMaterial((s=>{this.transitionVector2(s.uniforms.uMouseCoordinates.value,new D(e.x,e.y),.25),this.transitionUniforms([[s.uniforms.uXPointerFromCenter,t]])})),this.withMesh((e=>{this.rotateMesh(e,.1*t,-.1*s)}))}onPointerLeave(){this.withMaterial((e=>{this.transitionUniforms([[e.uniforms.uHoverState,0],[e.uniforms.uXPointerFromCenter,0]]),this.transitionVector2(e.uniforms.uMouseCoordinates.value,ve,.25)})),this.withMesh((e=>{this.rotateMesh(e,0,0)}))}pointerEventFromCenter(e){return{x:this.pointerFromCenter(e.x),y:this.pointerFromCenter(e.y)}}pointerFromCenter(e){return e<=.5?.5-e:-(e-.5)}transitionUniforms(e){for(const[t,s]of e)L.to(t,{duration:.5,value:s})}transitionVector2(e,t,s=.5){L.to(e,l(a({},t),{duration:s}))}rotateMesh(e,t,s){L.to(e.rotation,{duration:.5,y:t,x:s})}fadeMesh(){this.withMaterial((e=>{L.to(e.uniforms.uOpacity,{duration:.2,delay:.1,value:0})}))}revealMesh(){this.withMaterial((e=>{L.to(e.uniforms.uOpacity,{duration:.1,value:1})}))}};const xe=({ID:e,image:t,width:s,height:i})=>{const n=g.use(se),o=P(new we);return g.useEffect((()=>{if(!o.mesh)return;n.registerMesh(e,o.mesh);const t=n.subscribe(e,o.onPointer);return()=>{n.disposeMesh(e),n.unsubscribe(e,t)}}),[n,o,e]),p(((e,t)=>{o.withMaterial((e=>{e.uniforms.uTime.value=e.uniforms.uTime.value+t}))})),d.jsx(fe,{"position-z":0,scale:[s,i],ref:o.cacheReference,url:`${t.src}?bypass-cors-please`})},je=e=>{const t=g.use(se),[s,i]=g.useState([]);return g.useEffect((()=>{const e=t.subscribeToImages((({images:e})=>{i(e)}));return()=>{t.unsubscribeFromImages(e)}}),[t]),d.jsx(g.Fragment,{children:s.map((({width:e,height:t,ID:s,image:i})=>d.jsx(xe,{ID:s,image:i,width:e,height:t},s)))})};class ye extends pe{activate(e=0){this.withMesh((t=>{const{x:s,y:i}=t.scale;let n,o;window.innerWidth<window.innerHeight?(n=window.innerWidth,o=n*i/s):(o=window.innerHeight,n=o*s/i),L.timeline().to(t.scale,{y:o,x:n,duration:1,ease:"power2.inOut"}).to(t.position,{x:0,y:0,duration:1,ease:"power2.inOut"},0).to(t.rotation,{y:this.rotateBy(e,!0),duration:.3},.1).to(t.rotation,{y:0,duration:.6},.4)}))}deactivate({width:e,height:t,positionX:s=0,positionY:i=0,onTransitionComplete:n}){this.withMesh((o=>{L.timeline({onComplete:n}).to(o.scale,{x:e,y:t,duration:1,ease:"power2.inOut"}).to(o.position,{x:s,y:i,z:1,duration:1,ease:"power2.inOut"},0).to(o.rotation,{y:this.rotateBy(s,!0),duration:.4},.1).to(o.rotation,{y:0,duration:.5},.5)}))}rotateBy(e,t){return F(50*e/(window.innerWidth/(2*(t?-1:1))))}}const be=e=>{var t,s,i,n,o=e,{ID:r,image:u,width:h,height:m,activating:v,deactivating:f}=o,p=c(o,["ID","image","width","height","activating","deactivating"]);const w=g.use(se),x=P(new ye),j=g.useRef(w.getImageData(r));return g.useEffect((()=>{var e,t,s;const{x:i,y:n}=null!=(s=null==(t=null==(e=j.current)?void 0:e.mesh)?void 0:t.position)?s:{x:0,y:0};v?x.activate(i):f&&x.deactivate({width:h,height:m,positionX:i,positionY:n,onTransitionComplete:()=>{w.resetDeactivatedImage(),w.emitEvent(r,{type:"deactivation",position:{x:0,y:0}})}})}),[r,v,f,x,h,m,w]),d.jsx(fe,l(a({},p),{"position-z":1,scale:[h,m],ref:x.cacheReference,url:`${u.src}?bypass-cors-please`,"position-x":null==(s=null==(t=j.current)?void 0:t.mesh)?void 0:s.position.x,"position-y":null==(n=null==(i=j.current)?void 0:i.mesh)?void 0:n.position.y}))},Me=e=>e.activating||e.deactivating?d.jsx(be,a({},e)):null,Ie=e=>{const t=g.use(se),[s,i]=g.useState({images:[],activeImage:null,deactivatingImage:null});return g.useEffect((()=>{const e=t.subscribeToImages(i);return()=>{t.unsubscribeFromImages(e)}}),[t]),d.jsx(g.Fragment,{children:s.images.map((({width:e,height:t,ID:i,image:n})=>d.jsx(Me,{ID:i,image:n,width:e,height:t,activating:i===s.activeImage,deactivating:i===s.deactivatingImage},i)))})},Ce=({children:e})=>(C(),d.jsxs(ie,{root:"#netflixGLTarget",children:[e,d.jsx("div",{className:"webgl-images","aria-hidden":!0,children:d.jsx(w,{flat:!0,linear:!0,style:{pointerEvents:"none"},gl:{antialias:!0,alpha:!0},children:d.jsxs(g.Suspense,{children:[d.jsx(de,{}),d.jsx(je,{})]})})}),d.jsx("div",{className:"webgl-transition-element",children:d.jsx(w,{flat:!0,linear:!0,style:{pointerEvents:"none"},gl:{antialias:!0,alpha:!0},children:d.jsxs(g.Suspense,{children:[d.jsx(de,{}),d.jsx(Ie,{})]})})}),d.jsx(me,{}),d.jsx(ge,{})]})),Se=g.forwardRef((function(e,t){var s=e,{title:i,posterURL:n,className:o,onClick:r}=s,u=c(s,["title","posterURL","className","onClick"]);const h=g.useMemo((()=>d.jsx("img",{ref:t,src:n,alt:i})),[n,i,t]);return d.jsx("div",l(a({role:"group",className:I("content-poster",o)},u),{children:r?d.jsx("button",{onClick:r,children:h}):h}))})),Re=e=>{const t=g.use(se),s=g.useRef(null),i=g.use(oe),[n,o]=g.useState(null);g.useEffect((()=>{if(!s.current)return;const e=[];for(const{current:t}of i)t&&e.push(t);const n=t.registerImage(s.current,e);return o(n),()=>{t.unmountImage(n,e)}}),[t,i]);const r=g.useCallback((e=>{if(!s.current)return;let t,i;if("touches"in e){if(!e.touches[0])return;({clientX:t,clientY:i}=e.touches[0])}else({clientX:t,clientY:i}=e);const{left:n,top:o,width:r,height:a}=s.current.getBoundingClientRect();return{x:Math.abs((t-n)/r),y:1-Math.abs((i-o)/a)}}),[]),c=g.useCallback((e=>s=>{const i=r(s);i&&n&&t.emitEvent(n,{type:e,position:i})}),[r,t,n]),u=g.useMemo((()=>c("pointer-enter")),[c]),h=g.useMemo((()=>c("pointer-move")),[c]),m=g.useMemo((()=>c("pointer-leave")),[c]),v=g.useCallback((()=>{n&&t.activateImage(n)}),[n,t]);return d.jsx(Se,l(a({ref:s},e),{onClick:v,onMouseEnter:u,onTouchStart:u,onMouseMove:h,onTouchMove:h,onMouseLeave:m,onTouchEnd:m}))},ze=e=>{const t=b(M);return d.jsxs("div",{id:"netflixGLTarget",className:"netflix-scene",style:{maxHeight:t,height:t},children:[d.jsxs(Ce,{children:[d.jsx(he,{title:"Popular Movies","aria-label":"Popular Movies",children:O.MOVIES.map(((e,t)=>d.jsx(Re,{posterURL:e},t)))}),d.jsx(he,{title:"Popular Shows","aria-label":"Popular Shows",children:O.SHOWS.map(((e,t)=>d.jsx(Re,{posterURL:e},t)))}),d.jsx(he,{title:"Top Rated Movies","aria-label":"Top Rated Movies",children:O.MOVIES.map(((e,t)=>d.jsx(Re,{posterURL:e},t)))}),d.jsx(he,{title:"Top Rated Shows","aria-label":"Top Rated Shows",children:O.SHOWS.map(((e,t)=>d.jsx(Re,{posterURL:e},t)))})]}),d.jsx("div",{className:"padding"})]})};export{ze as NetflixScene};
//# sourceMappingURL=index-75MnUrYy.js.map

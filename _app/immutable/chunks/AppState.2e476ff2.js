var H=Object.defineProperty;var z=(n,e,t)=>e in n?H(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var y=(n,e,t)=>(z(n,typeof e!="symbol"?e+"":e,t),t);import{d as F,w as h}from"./index.0624fa79.js";import{g as f}from"./scheduler.c607dd8c.js";function ue(n){return(n==null?void 0:n.length)!==void 0?n:Array.from(n)}class ${static setShrinkDuration(e){return e<957?500:700}static setFlipDuration(){return 1e3}}var d=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ae(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var C={},_={},g={},R={},w={},I={},v={};Object.defineProperty(v,"__esModule",{value:!0});v.AutoIncrementingID=void 0;class V{constructor(){y(this,"incrementor",-1)}get(){return`${++this.incrementor}`}reset(){this.incrementor-1}}v.AutoIncrementingID=V;Object.defineProperty(I,"__esModule",{value:!0});I.Indexer=void 0;const G=v;class J extends Map{constructor(){super(...arguments);y(this,"IDs",new G.AutoIncrementingID)}register(t){const r=this.IDs.get();return this.set(r,t),r}execute(...t){for(const[r,c]of this)c(...t)}}I.Indexer=J;Object.defineProperty(w,"__esModule",{value:!0});w.EventEmitter=void 0;const K=I;class L extends Map{on(e,t){const r=this.get(e)||new K.Indexer,c=r.register(t);return this.set(e,r),c}off(e,t){const r=this.get(e);if(r)return r.delete(t)}emit(e,t){const r=this.get(e);r&&r.execute(t)}}w.EventEmitter=L;var W={};Object.defineProperty(W,"__esModule",{value:!0});(function(n){var e=d&&d.__createBinding||(Object.create?function(a,i,s,u){u===void 0&&(u=s);var o=Object.getOwnPropertyDescriptor(i,s);(!o||("get"in o?!i.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return i[s]}}),Object.defineProperty(a,u,o)}:function(a,i,s,u){u===void 0&&(u=s),a[u]=i[s]}),t=d&&d.__exportStar||function(a,i){for(var s in a)s!=="default"&&!Object.prototype.hasOwnProperty.call(i,s)&&e(i,a,s)};Object.defineProperty(n,"__esModule",{value:!0}),n.AutoIncrementingID=n.EventEmitter=void 0;var r=w;Object.defineProperty(n,"EventEmitter",{enumerable:!0,get:function(){return r.EventEmitter}});var c=v;Object.defineProperty(n,"AutoIncrementingID",{enumerable:!0,get:function(){return c.AutoIncrementingID}}),t(W,n)})(R);Object.defineProperty(g,"__esModule",{value:!0});g.Bucket=void 0;const U=R;class X{constructor(){this.bucket=new Map,this.IDs=new U.AutoIncrementingID}enqueue(e){const t=this.IDs.get();return this.bucket.set(t,e),t}dequeue(){for(const[e,t]of this.bucket)return this.bucket.delete(e),t}peak(){for(const e of this.bucket)return e}delete(e){return this.bucket.delete(e)}clear(){return this.bucket.clear()}get isEmpty(){return this.bucket.size===0}get length(){return this.bucket.size}}g.Bucket=X;var b={};Object.defineProperty(b,"__esModule",{value:!0});b.PriorityQueue=void 0;const Y=g;class Z{constructor(e){this.buckets=[],this.max=e-1;for(let t=0;t<e;t++)this.buckets.push(new Y.Bucket)}enqueue(e,t=0){return this.guard(t),this.buckets[t].enqueue(e)}dequeue(){return this.findFirst(e=>e.dequeue())}getBucket(e=0){return this.guard(e),this.buckets[e]}peak(){return this.findFirst(e=>e.peak())}get isEmpty(){return this.findFirst(()=>!1)===void 0}get length(){let e=0;return this.all(t=>{e+=t.length}),e}delete(e,t){return this.guard(t),this.getBucket(t).delete(e)}clear(){this.all(e=>{e.clear()})}guard(e){if(e>this.max)throw new Error("Out of Range Error: Attempted to access a bucket index that does not exist")}findFirst(e){for(const t of this.buckets)if(!t.isEmpty)return e(t)}all(e){for(const t of this.buckets)e(t)}}b.PriorityQueue=Z;var ee=d&&d.__awaiter||function(n,e,t,r){function c(a){return a instanceof t?a:new t(function(i){i(a)})}return new(t||(t=Promise))(function(a,i){function s(l){try{o(r.next(l))}catch(k){i(k)}}function u(l){try{o(r.throw(l))}catch(k){i(k)}}function o(l){l.done?a(l.value):c(l.value).then(s,u)}o((r=r.apply(n,e||[])).next())})},te=d&&d.__asyncValues||function(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof __values=="function"?__values(n):n[Symbol.iterator](),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(a){t[a]=n[a]&&function(i){return new Promise(function(s,u){i=n[a](i),c(s,u,i.done,i.value)})}}function c(a,i,s,u){Promise.resolve(u).then(function(o){a({value:o,done:s})},i)}};Object.defineProperty(_,"__esModule",{value:!0});_.TaskQueue=void 0;const O=g,ne=b;class D{constructor(e=D.defaultConfig){this.autoRun=!1,this.taskSeparation=0,this.subscriptions=new O.Bucket,this.internals=new O.Bucket,this.deferredTasks=new O.Bucket;const{priorities:t=1,autoRun:r=!1,taskSeparation:c=0}=e;this.autoRun=r,this.taskSeparation=c,this.tasks=new ne.PriorityQueue(t)}registerTask(e,t=1){const r=this.tasks.enqueue(e,t-1);return this.autoRun&&!this.internals.peak()&&this.executeAll(),()=>{this.tasks.delete(r,t-1)}}deferTask(e,t){const r=setTimeout(()=>{e(),this.deferredTasks.delete(c)},t),c=this.deferredTasks.enqueue(r);return()=>{clearTimeout(r),this.deferredTasks.delete(c)}}executeAll(e,t=this.taskSeparation){if(e&&this.subscriptions.enqueue(e),this.internals.peak())return this.getCancelFN();const r=this.cancellableExecution(this.tasks,t),c=this.internals.enqueue(r),a=()=>{this.internals.delete(c)};return this.subscriptions.enqueue(a),()=>{r(),a()}}executeTasksWithPriority(e=1,t=0,r){return r&&this.subscriptions.enqueue(r),this.internals.peak()?this.getCancelFN():this.cancellableExecution(this.tasks.getBucket(e-1),t)}clearPendingTasks(){this.tasks.clear(),this.clearDeferredTasks()}clearDeferredTasks(){for(;this.deferredTasks.length;){const e=this.deferredTasks.dequeue();e!==void 0&&clearTimeout(e)}}getCancelFN(){const e=this.internals.peak();if(e)return e[1]}cancellableExecution(e,t=this.taskSeparation){let r=!1;const c=this.generator(e,t);return(()=>ee(this,void 0,void 0,function*(){var i,s,u,o;try{for(var l=!0,k=te(c),P;P=yield k.next(),i=P.done,!i;){o=P.value,l=!1;try{if(r||!o)break;const x=e.dequeue();x&&x()}finally{l=!0}}}catch(j){s={error:j}}finally{try{!l&&!i&&(u=k.return)&&(yield u.call(k))}finally{if(s)throw s.error}}if(this.subscriptions.length)return this.cancellableExecution(this.subscriptions,0)}))(),()=>{r=!0}}*generator(e,t=0){for(;!e.isEmpty;)yield new Promise(r=>{this.deferTask(()=>{r(!0)},t)})}}_.TaskQueue=D;D.defaultConfig={priorities:1,autoRun:!1,taskSeparation:0};var N={};Object.defineProperty(N,"__esModule",{value:!0});(function(n){var e=d&&d.__createBinding||(Object.create?function(i,s,u,o){o===void 0&&(o=u);var l=Object.getOwnPropertyDescriptor(s,u);(!l||("get"in l?!s.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(i,o,l)}:function(i,s,u,o){o===void 0&&(o=u),i[o]=s[u]}),t=d&&d.__exportStar||function(i,s){for(var u in i)u!=="default"&&!Object.prototype.hasOwnProperty.call(s,u)&&e(s,i,u)};Object.defineProperty(n,"__esModule",{value:!0}),n.Bucket=n.PriorityQueue=n.TaskQueue=void 0;var r=_;Object.defineProperty(n,"TaskQueue",{enumerable:!0,get:function(){return r.TaskQueue}});var c=b;Object.defineProperty(n,"PriorityQueue",{enumerable:!0,get:function(){return c.PriorityQueue}});var a=g;Object.defineProperty(n,"Bucket",{enumerable:!0,get:function(){return a.Bucket}}),t(N,n)})(C);const oe=h("Home"),B=h("100%"),M=h("100vh"),E=h(1e3),Q=h(!0),A=h(!1),ce=h(3e3),p=h("flip-controller shrink reverse-rotation flip-active"),S=F(E,n=>$.setShrinkDuration(n)),m=F(E,()=>$.setFlipDuration()),T=class T{static enter(){p.update(()=>"flip-controller shrink reverse-rotation"),Q.update(()=>!1),this.TaskQueue.deferTask(()=>{p.update(()=>"flip-controller shrink"),p.update(()=>"flip-controller"),this.TaskQueue.deferTask(()=>{this.TaskQueue.executeAll()},f(m))},1e3)}static toggleMenu(){A.update(e=>!e)}static setDimensions(){E.update(()=>window.innerWidth);const e=`${window.innerHeight}px`;e!==f(M)&&M.update(()=>e);const t=`${window.innerWidth}px`;t!==f(B)&&B.update(()=>t)}static navigate(e){let t=0;f(A)&&(T.toggleMenu(),t=800),this.TaskQueue.deferTask(()=>{p.update(()=>"flip-controller shrink"),this.TaskQueue.deferTask(()=>{p.update(()=>"flip-controller shrink reverse-rotation flip-active"),this.TaskQueue.deferTask(()=>{Q.update(()=>!0),e().then(()=>{this.TaskQueue.deferTask(()=>{Q.update(()=>!1),p.update(()=>"flip-controller shrink reverse-rotation"),this.TaskQueue.deferTask(()=>{p.update(()=>"flip-controller"),this.TaskQueue.deferTask(()=>{this.TaskQueue.executeAll()},f(S))},f(m))},f(m))})},f(m))},f(S))},t)}};y(T,"TaskQueue",new C.TaskQueue);let q=T;export{q as A,ce as a,d as c,ue as e,p as f,ae as g,M as h,Q as l,A as m,oe as p,E as r,B as w};
//# sourceMappingURL=AppState.2e476ff2.js.map
